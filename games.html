<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games - Marvel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        /* Games Specific Styles */
        .games-section {
            padding: 100px 0;
            min-height: 100vh;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .game-card {
            padding: 30px;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .game-card:hover {
            transform: translateY(-10px);
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(108, 99, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: var(--transition);
            opacity: 0;
        }

        .game-card:hover::before {
            animation: shine 0.5s ease-in-out;
        }

        @keyframes shine {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
                opacity: 0;
            }
        }

        .game-icon {
            font-size: 3rem;
            color: var(--accent-color);
            margin-bottom: 20px;
        }

        .game-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .game-card p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .play-btn {
            background: linear-gradient(90deg, var(--accent-color), #a29bfe);
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            transition: var(--transition);
        }

        .play-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(108, 99, 255, 0.3);
        }

        /* Game Modal */
        .game-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .game-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .game-container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close-game {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent-color);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
            z-index: 10;
        }

        .close-game:hover {
            transform: rotate(90deg);
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-header h2 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        /* Custom Alert Modal Styles */
        .alert-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .alert-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .alert-container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
            overflow: hidden;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }

        .alert-modal.active .alert-container {
            transform: scale(1);
        }

        .alert-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: bounceIn 0.6s ease;
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .alert-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .alert-message {
            font-size: 1.1rem;
            margin-bottom: 25px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .alert-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .alert-btn {
            padding: 12px 25px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .alert-btn.primary {
            background: linear-gradient(90deg, var(--accent-color), #a29bfe);
            color: white;
        }

        .alert-btn.secondary {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
        }

        .alert-btn:hover {
            transform: translateY(-3px);
        }

        /* Alert Type Specific Styles */
        .alert-modal.success .alert-icon {
            color: #4CAF50;
        }

        .alert-modal.error .alert-icon {
            color: #f44336;
        }

        .alert-modal.warning .alert-icon {
            color: #FF9800;
        }

        .alert-modal.info .alert-icon {
            color: #2196F3;
        }

        .alert-modal.game-over .alert-icon {
            color: #f44336;
        }

        .alert-modal.win .alert-icon {
            color: #4CAF50;
        }

        /* Confetti Animation */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Trophy Animation */
        .trophy {
            font-size: 4rem;
            color: gold;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            animation: trophy-glow 2s ease-in-out infinite alternate;
        }

        @keyframes trophy-glow {
            from {
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            }
            to {
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.9), 0 0 30px rgba(255, 215, 0, 0.7);
            }
        }

        /* Memory Game Styles */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 500px;
            margin: 0 auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--accent-color), #a29bfe);
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .memory-card.flip {
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            animation: matchPulse 0.5s ease;
            pointer-events: none;
        }

        @keyframes matchPulse {
            0%, 100% { transform: scale(1) rotateY(180deg); }
            50% { transform: scale(1.1) rotateY(180deg); }
        }

        .memory-card-front,
        .memory-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .memory-card-front {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
        }

        .memory-card-back {
            background: white;
            transform: rotateY(180deg);
        }

        /* Snake Game Styles */
        #snakeCanvas {
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
        }

        .game-controls {
            text-align: center;
            margin-top: 20px;
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .game-info span {
            color: var(--accent-color);
            font-weight: 600;
        }

        /* Tic Tac Toe Styles */
        .tic-tac-toe {
            display: grid;
            grid-template-columns: repeat(3, 120px);
            gap: 10px;
            justify-content: center;
            margin: 30px auto;
        }

        .tic-cell {
            width: 120px;
            height: 120px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            font-size: 3rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: var(--text-color);
        }

        .tic-cell:hover:not(.taken) {
            background: rgba(108, 99, 255, 0.2);
            transform: scale(1.05);
        }

        .tic-cell.x {
            color: #ff6b6b;
        }

        .tic-cell.o {
            color: #4ecdc4;
        }

        .tic-cell.winner {
            animation: winnerGlow 1s ease infinite;
        }

        @keyframes winnerGlow {
            0%, 100% { box-shadow: 0 0 20px var(--accent-color); }
            50% { box-shadow: 0 0 40px var(--accent-color); }
        }

        /* Quiz Game Styles */
        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .quiz-question {
            font-size: 1.3rem;
            margin-bottom: 30px;
            text-align: center;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
        }

        .quiz-option {
            padding: 15px 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            text-align: left;
        }

        .quiz-option:hover {
            background: rgba(108, 99, 255, 0.2);
            transform: translateX(10px);
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
        }

        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
        }

        .quiz-progress {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 50px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-color), #a29bfe);
            transition: width 0.3s ease;
        }

        /* Game Buttons */
        .game-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .game-btn {
            padding: 10px 25px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .game-btn.primary {
            background: linear-gradient(90deg, var(--accent-color), #a29bfe);
            color: white;
        }

        .game-btn.secondary {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
        }

        .game-btn:hover {
            transform: translateY(-3px);
        }

        /* Color Match Game Styles */
        .color-match-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .color-display {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .color-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .color-option {
            height: 80px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .color-option:hover {
            transform: scale(1.05);
        }

        .color-option.selected {
            border-color: var(--accent-color);
            box-shadow: 0 0 15px rgba(108, 99, 255, 0.5);
        }

        .color-option.correct {
            border-color: #4CAF50;
            animation: correctPulse 0.5s ease;
        }

        .color-option.incorrect {
            border-color: #f44336;
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Catch the Ball Game Styles */
        #catchBallCanvas {
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            background: linear-gradient(to bottom, #87CEEB, #98D8E8);
            touch-action: none;
        }

        .catch-ball-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid var(--accent-color);
            color: var(--text-color);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-btn:active {
            transform: scale(0.95);
            background: rgba(108, 99, 255, 0.3);
        }

        /* Word Puzzle Game Styles */
        .word-puzzle-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .word-display {
            font-size: 2.5rem;
            letter-spacing: 10px;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
            color: var(--accent-color);
        }

        .word-hint {
            text-align: center;
            margin-bottom: 30px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .word-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 10px;
            border: 2px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: var(--text-color);
            text-align: center;
            margin-bottom: 20px;
        }

        .word-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .word-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .letter-btn {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }

        .letter-btn:hover {
            background: rgba(108, 99, 255, 0.2);
            transform: translateY(-3px);
        }

        .letter-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Pong Game Styles */
        #pongCanvas {
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
        }

        /* 2048 Game Styles */
        .game-2048-container {
            max-width: 400px;
            margin: 0 auto;
        }

        .game-2048-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid var(--glass-border);
            border-radius: 10px;
            padding: 10px;
            margin: 20px auto;
        }

        .game-2048-cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.15s ease;
        }

        .game-2048-cell[data-value="2"] { background: #eee4da; color: #776e65; }
        .game-2048-cell[data-value="4"] { background: #ede0c8; color: #776e65; }
        .game-2048-cell[data-value="8"] { background: #f2b179; color: #f9f6f2; }
        .game-2048-cell[data-value="16"] { background: #f59563; color: #f9f6f2; }
        .game-2048-cell[data-value="32"] { background: #f67c5f; color: #f9f6f2; }
        .game-2048-cell[data-value="64"] { background: #f65e3b; color: #f9f6f2; }
        .game-2048-cell[data-value="128"] { background: #edcf72; color: #f9f6f2; font-size: 1.2rem; }
        .game-2048-cell[data-value="256"] { background: #edcc61; color: #f9f6f2; font-size: 1.2rem; }
        .game-2048-cell[data-value="512"] { background: #edc850; color: #f9f6f2; font-size: 1.2rem; }
        .game-2048-cell[data-value="1024"] { background: #edc53f; color: #f9f6f2; font-size: 1rem; }
        .game-2048-cell[data-value="2048"] { background: #edc22e; color: #f9f6f2; font-size: 1rem; }

        /* Brick Breaker Game Styles */
        #brickBreakerCanvas {
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            display: block;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
        }

        /* Rock Paper Scissors Game Styles */
        .rps-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .rps-choices {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .rps-choice {
            width: 100px;
            height: 100px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid var(--glass-border);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .rps-choice:hover {
            transform: scale(1.1);
            background: rgba(108, 99, 255, 0.2);
        }

        .rps-result {
            text-align: center;
            margin: 20px 0;
            font-size: 1.5rem;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .rps-scores {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            font-size: 1.2rem;
        }

        /* Sudoku Game Styles */
        .sudoku-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .sudoku-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 1px;
            background: var(--accent-color);
            border: 3px solid var(--accent-color);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px auto;
        }

        .sudoku-cell {
            aspect-ratio: 1;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-color);
        }

        .sudoku-cell:nth-child(3n):not(:nth-child(9n)) {
            border-right: 2px solid var(--accent-color);
        }

        .sudoku-cell:nth-child(n+19):nth-child(-n+27),
        .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom: 2px solid var(--accent-color);
        }

        .sudoku-cell.selected {
            background: rgba(108, 99, 255, 0.3);
        }

        .sudoku-cell.fixed {
            color: var(--accent-color);
            cursor: default;
        }

        .sudoku-cell.error {
            color: #ff6b6b;
        }

        .sudoku-controls {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 20px auto;
        }

        .sudoku-number {
            aspect-ratio: 1;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-color);
        }

        .sudoku-number:hover {
            background: rgba(108, 99, 255, 0.2);
            transform: scale(1.05);
        }

        /* Desktop/Mobile Specific Styles */
        .desktop-only {
            display: block;
        }

        .mobile-only {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .memory-game {
                grid-template-columns: repeat(3, 1fr);
                max-width: 350px;
            }

            .tic-tac-toe {
                grid-template-columns: repeat(3, 100px);
            }

            .tic-cell {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }

            #snakeCanvas {
                width: 300px !important;
                height: 300px !important;
            }

            .desktop-only {
                display: none !important;
            }

            .mobile-only {
                display: block;
            }

            .color-options {
                grid-template-columns: repeat(2, 1fr);
            }

            .word-display {
                font-size: 2rem;
                letter-spacing: 5px;
            }

            .letter-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .game-2048-cell {
                font-size: 1.2rem;
            }

            .rps-choice {
                width: 80px;
                height: 80px;
                font-size: 2.5rem;
            }

            .sudoku-cell {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="background-container">
        <div class="bokeh"></div>
    </div>
    
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span>Marvel</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Beranda</a>
                </li>
                <li class="nav-item">
                    <a href="about.html" class="nav-link">Tentang</a>
                </li>
                <li class="nav-item">
                    <a href="gallery.html" class="nav-link">Galeri</a>
                </li>
                <li class="nav-item">
                    <a href="coding_tasks/tugas_all.html" class="nav-link">Tugas</a>
                </li>
                <li class="nav-item">
                    <a href="blog.html" class="nav-link">Blog</a>
                </li>
                <li class="nav-item">
                    <a href="games.html" class="nav-link active">Games</a>
                </li>
                <li class="nav-item">
                    <div class="theme-toggle">
                        <i class="fas fa-moon"></i>
                    </div>
                </li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <main>
        <section class="games-section">
            <div class="container">
                <h1 class="section-title" data-aos="fade-up">Games Zone</h1>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Nikmati berbagai permainan seru di sini!</p>
                
                <div class="games-grid">
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="200" onclick="openGame('memory')">
                        <div class="game-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>Memory Card</h3>
                        <p>Uji daya ingat Anda dengan mencocokkan kartu yang sama</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass desktop-only" data-aos="fade-up" data-aos-delay="300" onclick="openGame('snake')">
                        <div class="game-icon">
                            <i class="fas fa-dragon"></i>
                        </div>
                        <h3>Snake Game</h3>
                        <p>Klasik game ular yang adiktif dan menyenangkan</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="400" onclick="openGame('tictactoe')">
                        <div class="game-icon">
                            <i class="fas fa-hashtag"></i>
                        </div>
                        <h3>Tic Tac Toe</h3>
                        <p>Permainan klasik untuk dua pemain</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="500" onclick="openGame('quiz')">
                        <div class="game-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h3>Quiz Game</h3>
                        <p>Uji pengetahuan umum Anda dengan kuis seru</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass mobile-only" data-aos="fade-up" data-aos-delay="600" onclick="openGame('colormatch')">
                        <div class="game-icon">
                            <i class="fas fa-palette"></i>
                        </div>
                        <h3>Color Match</h3>
                        <p>Cocokkan warna yang tepat dalam game visual yang menarik</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass mobile-only" data-aos="fade-up" data-aos-delay="700" onclick="openGame('catchball')">
                        <div class="game-icon">
                            <i class="fas fa-baseball-ball"></i>
                        </div>
                        <h3>Catch the Ball</h3>
                        <p>Tangkap bola yang jatuh sebelum menyentuh tanah</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass mobile-only" data-aos="fade-up" data-aos-delay="800" onclick="openGame('wordpuzzle')">
                        <div class="game-icon">
                            <i class="fas fa-spell-check"></i>
                        </div>
                        <h3>Word Puzzle</h3>
                        <p>Selesaikan teka-teki kata dengan petunjuk yang diberikan</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <!-- Previous Games -->
                    <div class="game-card glass desktop-only" data-aos="fade-up" data-aos-delay="900" onclick="openGame('pong')">
                        <div class="game-icon">
                            <i class="fas fa-table-tennis-paddle-ball"></i>
                        </div>
                        <h3>Pong Game</h3>
                        <p>Game klasik Pong dengan gameplay yang adiktif</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="1000" onclick="openGame('2048')">
                        <div class="game-icon">
                            <i class="fas fa-th"></i>
                        </div>
                        <h3>2048</h3>
                        <p>Game puzzle angka yang sangat populer dan adiktif</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass desktop-only" data-aos="fade-up" data-aos-delay="1100" onclick="openGame('brickbreaker')">
                        <div class="game-icon">
                            <i class="fas fa-cube"></i>
                        </div>
                        <h3>Brick Breaker</h3>
                        <p>Hancurkan semua balok dengan bola dan paddle</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="1200" onclick="openGame('rockpaperscissors')">
                        <div class="game-icon">
                            <i class="fas fa-hand-rock"></i>
                        </div>
                        <h3>Rock Paper Scissors</h3>
                        <p>Permainan klasik gunting batu kertas melawan komputer</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="1300" onclick="openGame('sudoku')">
                        <div class="game-icon">
                            <i class="fas fa-grid"></i>
                        </div>
                        <h3>Sudoku</h3>
                        <p>Isi grid 9x9 dengan angka 1-9 tanpa pengulangan</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <!-- New Games -->
                    <div class="game-card glass desktop-only" data-aos="fade-up" data-aos-delay="1400" onclick="openGame('spaceshooter')">
                        <div class="game-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <h3>Space Shooter</h3>
                        <p>Kendalikan pesawat luar angkasa dan hancurkan asteroid</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass mobile-only" data-aos="fade-up" data-aos-delay="1500" onclick="openGame('flappybird')">
                        <div class="game-icon">
                            <i class="fas fa-dove"></i>
                        </div>
                        <h3>Flappy Bird</h3>
                        <p>Bantu burung terbang melalui pipa-pipa</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="1600" onclick="openGame('hangman')">
                        <div class="game-icon">
                            <i class="fas fa-user-hang"></i>
                        </div>
                        <h3>Hangman</h3>
                        <p>Tebak kata sebelum gambar hangman selesai</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="1700" onclick="openGame('mathchallenge')">
                        <div class="game-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <h3>Math Challenge</h3>
                        <p>Uji kemampuan matematika Anda dengan soal cepat</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="1800" onclick="openGame('whackamole')">
                        <div class="game-icon">
                            <i class="fas fa-hammer"></i>
                        </div>
                        <h3>Whack-a-Mole</h3>
                        <p>Pukul tikus yang muncul dari lubang</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="1900" onclick="openGame('simonsays')">
                        <div class="game-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h3>Simon Says</h3>
                        <p>Ikuti pola warna yang ditampilkan</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="2000" onclick="openGame('connectfour')">
                        <div class="game-icon">
                            <i class="fas fa-circle-notch"></i>
                        </div>
                        <h3>Connect Four</h3>
                        <p>Susun empat bidak dalam satu baris untuk menang</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="2100" onclick="openGame('wordsearch')">
                        <div class="game-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Word Search</h3>
                        <p>Cari kata-kata tersembunyi dalam grid huruf</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                    
                    <div class="game-card glass" data-aos="fade-up" data-aos-delay="2200" onclick="openGame('typingspeed')">
                        <div class="game-icon">
                            <i class="fas fa-keyboard"></i>
                        </div>
                        <h3>Typing Speed Test</h3>
                        <p>Uji kecepatan mengetik Anda</p>
                        <span class="play-btn">Mainkan <i class="fas fa-play"></i></span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Game Modal -->
    <div class="game-modal" id="gameModal">
        <div class="game-container">
            <button class="close-game" onclick="closeGame()">
                <i class="fas fa-times"></i>
            </button>
            <div id="gameContent"></div>
        </div>
    </div>

    <!-- Custom Alert Modal -->
    <div class="alert-modal" id="alertModal">
        <div class="alert-container">
            <div class="alert-icon" id="alertIcon">
                <i class="fas fa-info-circle"></i>
            </div>
            <h3 class="alert-title" id="alertTitle">Notification</h3>
            <p class="alert-message" id="alertMessage">This is a message</p>
            <div class="alert-buttons">
                <button class="alert-btn primary" id="alertPrimaryBtn">OK</button>
                <button class="alert-btn secondary" id="alertSecondaryBtn" style="display: none;">Cancel</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2023 Marvel. All rights reserved.</p>
                <div class="social-links">
                    <a href="https://github.com/Alfathir30"><i class="fab fa-github"></i></a>
                    <a href="http://instagram.com/al.marvel_"><i class="fab fa-instagram"></i></a>
                    <a href="http://wa.me/6288297927896"><i class="fa-brands fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });

        // Custom Alert System
        function showAlert(type, title, message, primaryBtnText, secondaryBtnText, primaryCallback, secondaryCallback) {
            const modal = document.getElementById('alertModal');
            const icon = document.getElementById('alertIcon');
            const titleElement = document.getElementById('alertTitle');
            const messageElement = document.getElementById('alertMessage');
            const primaryBtn = document.getElementById('alertPrimaryBtn');
            const secondaryBtn = document.getElementById('alertSecondaryBtn');
            
            // Set content
            titleElement.textContent = title;
            messageElement.textContent = message;
            primaryBtn.textContent = primaryBtnText || 'OK';
            
            // Set icon based on type
            icon.innerHTML = '';
            switch(type) {
                case 'success':
                    icon.innerHTML = '<i class="fas fa-check-circle"></i>';
                    break;
                case 'error':
                    icon.innerHTML = '<i class="fas fa-times-circle"></i>';
                    break;
                case 'warning':
                    icon.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
                    break;
                case 'info':
                    icon.innerHTML = '<i class="fas fa-info-circle"></i>';
                    break;
                case 'game-over':
                    icon.innerHTML = '<i class="fas fa-skull-crossbones"></i>';
                    break;
                case 'win':
                    icon.innerHTML = '<i class="fas fa-trophy"></i>';
                    break;
                default:
                    icon.innerHTML = '<i class="fas fa-info-circle"></i>';
            }
            
            // Set modal type class
            modal.className = 'alert-modal';
            if (type) {
                modal.classList.add(type);
            }
            
            // Handle secondary button
            if (secondaryBtnText) {
                secondaryBtn.textContent = secondaryBtnText;
                secondaryBtn.style.display = 'block';
                secondaryBtn.onclick = function() {
                    modal.classList.remove('active');
                    if (secondaryCallback) secondaryCallback();
                };
            } else {
                secondaryBtn.style.display = 'none';
            }
            
            // Handle primary button
            primaryBtn.onclick = function() {
                modal.classList.remove('active');
                if (primaryCallback) primaryCallback();
            };
            
            // Show modal
            modal.classList.add('active');
            
            // Add confetti for win alerts
            if (type === 'win') {
                createConfetti();
            }
        }
        
        // Create confetti effect
        function createConfetti() {
            const container = document.querySelector('.alert-container');
            const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = confetti.style.width;
                    confetti.style.opacity = Math.random() * 0.7 + 0.3;
                    container.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 30);
            }
        }

        // Game Modal Functions
        function openGame(gameType) {
            const modal = document.getElementById('gameModal');
            const content = document.getElementById('gameContent');
            
            switch(gameType) {
                case 'memory':
                    content.innerHTML = getMemoryGameHTML();
                    initMemoryGame();
                    break;
                case 'snake':
                    content.innerHTML = getSnakeGameHTML();
                    initSnakeGame();
                    break;
                case 'tictactoe':
                    content.innerHTML = getTicTacToeHTML();
                    initTicTacToe();
                    break;
                case 'quiz':
                    content.innerHTML = getQuizGameHTML();
                    initQuizGame();
                    break;
                case 'colormatch':
                    content.innerHTML = getColorMatchHTML();
                    initColorMatch();
                    break;
                case 'catchball':
                    content.innerHTML = getCatchBallHTML();
                    initCatchBall();
                    break;
                case 'wordpuzzle':
                    content.innerHTML = getWordPuzzleHTML();
                    initWordPuzzle();
                    break;
                case 'pong':
                    content.innerHTML = getPongGameHTML();
                    initPongGame();
                    break;
                case '2048':
                    content.innerHTML = get2048GameHTML();
                    init2048Game();
                    break;
                case 'brickbreaker':
                    content.innerHTML = getBrickBreakerHTML();
                    initBrickBreaker();
                    break;
                case 'rockpaperscissors':
                    content.innerHTML = getRockPaperScissorsHTML();
                    initRockPaperScissors();
                    break;
                case 'sudoku':
                    content.innerHTML = getSudokuHTML();
                    initSudoku();
                    break;
                case 'spaceshooter':
                    content.innerHTML = getSpaceShooterHTML();
                    initSpaceShooterGame();
                    break;
                case 'flappybird':
                    content.innerHTML = getFlappyBirdHTML();
                    initFlappyBirdGame();
                    break;
                case 'hangman':
                    content.innerHTML = getHangmanHTML();
                    initHangmanGame();
                    break;
                case 'mathchallenge':
                    content.innerHTML = getMathChallengeHTML();
                    initMathChallengeGame();
                    break;
                case 'whackamole':
                    content.innerHTML = getWhackAMoleHTML();
                    initWhackAMoleGame();
                    break;
                case 'simonsays':
                    content.innerHTML = getSimonSaysHTML();
                    initSimonSaysGame();
                    break;
                case 'connectfour':
                    content.innerHTML = getConnectFourHTML();
                    initConnectFourGame();
                    break;
                case 'wordsearch':
                    content.innerHTML = getWordSearchHTML();
                    initWordSearchGame();
                    break;
                case 'typingspeed':
                    content.innerHTML = getTypingSpeedHTML();
                    initTypingSpeedGame();
                    break;
            }
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeGame() {
            const modal = document.getElementById('gameModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // Stop any running games
            if (window.snakeInterval) {
                clearInterval(window.snakeInterval);
            }
            if (window.catchBallInterval) {
                clearInterval(window.catchBallInterval);
            }
            if (window.pongInterval) {
                clearInterval(window.pongInterval);
            }
            if (window.brickBreakerInterval) {
                clearInterval(window.brickBreakerInterval);
            }
            if (window.spaceShooterInterval) {
                clearInterval(window.spaceShooterInterval);
            }
            if (window.flappyBirdInterval) {
                clearInterval(window.flappyBirdInterval);
            }
            if (window.whackAMoleInterval) {
                clearInterval(window.whackAMoleInterval);
            }
            if (window.simonSaysInterval) {
                clearInterval(window.simonSaysInterval);
            }
            if (window.typingSpeedInterval) {
                clearInterval(window.typingSpeedInterval);
            }
        }

        // Memory Game
        function getMemoryGameHTML() {
            return `
                <div class="game-header">
                    <h2>Memory Card Game</h2>
                    <p>Cocokkan semua pasangan kartu!</p>
                </div>
                <div class="game-info">
                    <div>Moves: <span id="memoryMoves">0</span></div>
                    <div>Time: <span id="memoryTime">00:00</span></div>
                </div>
                <div class="memory-game" id="memoryGame"></div>
                <div class="game-buttons">
                    <button class="game-btn primary" onclick="initMemoryGame()">New Game</button>
                    <button class="game-btn secondary" onclick="closeGame()">Close</button>
                </div>
            `;
        }

        function initMemoryGame() {
            const gameContainer = document.getElementById('memoryGame');
            const emojis = ['🎮', '🎯', '🎨', '🎭', '🎪', '🎬', '🎸', '🎺'];
            const cards = [...emojis, ...emojis];
            let moves = 0;
            let matches = 0;
            let flippedCards = [];
            let canFlip = true;
            let startTime = Date.now();
            
            // Shuffle cards
            cards.sort(() => Math.random() - 0.5);
            
            // Create card elements
            gameContainer.innerHTML = '';
            cards.forEach((emoji, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.emoji = emoji;
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="memory-card-front">?</div>
                    <div class="memory-card-back">${emoji}</div>
                `;
                card.addEventListener('click', flipCard);
                gameContainer.appendChild(card);
            });
            
            // Reset counters
            document.getElementById('memoryMoves').textContent = '0';
            matches = 0;
            moves = 0;
            startTime = Date.now();
            
            // Update timer
            if (window.memoryTimer) clearInterval(window.memoryTimer);
            window.memoryTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
                const seconds = (elapsed % 60).toString().padStart(2, '0');
                document.getElementById('memoryTime').textContent = `${minutes}:${seconds}`;
            }, 1000);
            
            function flipCard() {
                if (!canFlip || this.classList.contains('flip') || this.classList.contains('matched')) return;
                
                this.classList.add('flip');
                flippedCards.push(this);
                
                if (flippedCards.length === 2) {
                    canFlip = false;
                    moves++;
                    document.getElementById('memoryMoves').textContent = moves;
                    
                    const [card1, card2] = flippedCards;
                    if (card1.dataset.emoji === card2.dataset.emoji) {
                        card1.classList.add('matched');
                        card2.classList.add('matched');
                        matches++;
                        
                        if (matches === emojis.length) {
                            clearInterval(window.memoryTimer);
                            setTimeout(() => {
                                showAlert('win', 'Congratulations!', `You won in ${moves} moves!`, 'Play Again', 'Close', 
                                    () => { initMemoryGame(); }, 
                                    () => { closeGame(); });
                            }, 500);
                        }
                        
                        flippedCards = [];
                        canFlip = true;
                    } else {
                        setTimeout(() => {
                            card1.classList.remove('flip');
                            card2.classList.remove('flip');
                            flippedCards = [];
                            canFlip = true;
                        }, 1000);
                    }
                }
            }
        }

        // Snake Game
        function getSnakeGameHTML() {
            return `
                <div class="game-header">
                    <h2>Snake Game</h2>
                    <p>Gunakan arrow keys untuk menggerakkan ular!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="snakeScore">0</span></div>
                    <div>High Score: <span id="snakeHighScore">0</span></div>
                </div>
                <canvas id="snakeCanvas" width="400" height="400"></canvas>
                <div class="game-controls">
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startSnakeGame()">Start Game</button>
                        <button class="game-btn secondary" onclick="pauseSnakeGame()">Pause</button>
                    </div>
                </div>
            `;
        }

        function initSnakeGame() {
            const canvas = document.getElementById('snakeCanvas');
            const ctx = canvas.getContext('2d');
            const gridSize = 20;
            const tileCount = canvas.width / gridSize;
            
            let snake = [{x: 10, y: 10}];
            let direction = {x: 0, y: 0};
            let food = {x: 15, y: 15};
            let score = 0;
            let highScore = localStorage.getItem('snakeHighScore') || 0;
            let gameRunning = false;
            
            document.getElementById('snakeHighScore').textContent = highScore;
            
            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                if (!gameRunning) return;
                
                switch(e.key) {
                    case 'ArrowUp':
                        if (direction.y === 0) {
                            direction = {x: 0, y: -1};
                        }
                        break;
                    case 'ArrowDown':
                        if (direction.y === 0) {
                            direction = {x: 0, y: 1};
                        }
                        break;
                    case 'ArrowLeft':
                        if (direction.x === 0) {
                            direction = {x: -1, y: 0};
                        }
                        break;
                    case 'ArrowRight':
                        if (direction.x === 0) {
                            direction = {x: 1, y: 0};
                        }
                        break;
                }
            });
            
            window.startSnakeGame = function() {
                if (gameRunning) return;
                gameRunning = true;
                direction = {x: 1, y: 0};
                gameLoop();
            };
            
            window.pauseSnakeGame = function() {
                gameRunning = false;
            };
            
            function gameLoop() {
                if (!gameRunning) return;
                
                // Move snake
                const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
                
                // Check walls
                if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                    gameOver();
                    return;
                }
                
                // Check self collision
                for (let segment of snake) {
                    if (head.x === segment.x && head.y === segment.y) {
                        gameOver();
                        return;
                    }
                }
                
                snake.unshift(head);
                
                // Check food
                if (head.x === food.x && head.y === food.y) {
                    score++;
                    document.getElementById('snakeScore').textContent = score;
                    generateFood();
                } else {
                    snake.pop();
                }
                
                // Draw
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw snake
                ctx.fillStyle = '#4CAF50';
                for (let segment of snake) {
                    ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);
                }
                
                // Draw food
                ctx.fillStyle = '#ff6b6b';
                ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);
                
                setTimeout(gameLoop, 100);
            }
            
            function generateFood() {
                food = {
                    x: Math.floor(Math.random() * tileCount),
                    y: Math.floor(Math.random() * tileCount)
                };
                
                // Make sure food doesn't spawn on snake
                for (let segment of snake) {
                    if (food.x === segment.x && food.y === segment.y) {
                        generateFood();
                        return;
                    }
                }
            }
            
            function gameOver() {
                gameRunning = false;
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('snakeHighScore', highScore);
                    document.getElementById('snakeHighScore').textContent = highScore;
                    showAlert('success', 'New High Score!', `Your score: ${score}`, 'Play Again', 'Close', 
                                () => { initSnakeGame(); }, 
                                () => { closeGame(); });
                } else {
                    showAlert('game-over', 'Game Over', `Your score: ${score}`, 'Try Again', 'Close', 
                                () => { initSnakeGame(); }, 
                                () => { closeGame(); });
                }
                
                // Reset game
                snake = [{x: 10, y: 10}];
                direction = {x: 0, y: 0};
                score = 0;
                document.getElementById('snakeScore').textContent = score;
                generateFood();
            }
            
            // Initial draw
            generateFood();
        }

        // Tic Tac Toe
        function getTicTacToeHTML() {
            return `
                <div class="game-header">
                    <h2>Tic Tac Toe</h2>
                    <p>Player <span id="currentPlayer">X</span>'s turn</p>
                </div>
                <div class="tic-tac-toe" id="ticTacToe"></div>
                <div class="game-buttons">
                    <button class="game-btn primary" onclick="initTicTacToe()">New Game</button>
                    <button class="game-btn secondary" onclick="closeGame()">Close</button>
                </div>
            `;
        }

        function initTicTacToe() {
            const board = document.getElementById('ticTacToe');
            let currentPlayer = 'X';
            let gameBoard = ['', '', '', '', '', '', '', '', ''];
            let gameActive = true;
            
            board.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'tic-cell';
                cell.dataset.index = i;
                cell.addEventListener('click', handleCellClick);
                board.appendChild(cell);
            }
            
            function handleCellClick(e) {
                const index = e.target.dataset.index;
                
                if (gameBoard[index] !== '' || !gameActive) return;
                
                gameBoard[index] = currentPlayer;
                e.target.textContent = currentPlayer;
                e.target.classList.add(currentPlayer.toLowerCase(), 'taken');
                
                if (checkWinner()) {
                    document.getElementById('currentPlayer').textContent = currentPlayer;
                    setTimeout(() => {
                        showAlert('win', 'Player Wins!', `Player ${currentPlayer} wins the game!`, 'Play Again', 'Close', 
                                    () => { initTicTacToe(); }, 
                                    () => { closeGame(); });
                        gameActive = false;
                    }, 100);
                } else if (gameBoard.every(cell => cell !== '')) {
                    setTimeout(() => {
                        showAlert('info', "It's a Draw!", "The game ended in a draw!", 'Play Again', 'Close', 
                                    () => { initTicTacToe(); }, 
                                    () => { closeGame(); });
                        gameActive = false;
                    }, 100);
                } else {
                    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                    document.getElementById('currentPlayer').textContent = currentPlayer;
                }
            }
            
            function checkWinner() {
                const winPatterns = [
                    [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
                    [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
                    [0, 4, 8], [2, 4, 6] // Diagonals
                ];
                
                for (let pattern of winPatterns) {
                    const [a, b, c] = pattern;
                    if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
                        // Highlight winning cells
                        document.querySelectorAll('.tic-cell')[a].classList.add('winner');
                        document.querySelectorAll('.tic-cell')[b].classList.add('winner');
                        document.querySelectorAll('.tic-cell')[c].classList.add('winner');
                        return true;
                    }
                }
                return false;
            }
        }

        // Quiz Game
        function getQuizGameHTML() {
            return `
                <div class="game-header">
                    <h2>Quiz Game</h2>
                    <p>Uji pengetahuan umum Anda!</p>
                </div>
                <div class="quiz-container">
                    <div class="quiz-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 20%"></div>
                        </div>
                        <p style="text-align: center; margin-top: 10px;">
                            Question <span id="currentQuestion">1</span> of 5
                        </p>
                    </div>
                    <div class="quiz-question" id="quizQuestion">
                        Loading question...
                    </div>
                    <div class="quiz-options" id="quizOptions"></div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initQuizGame()">New Quiz</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initQuizGame() {
            const questions = [
                {
                    question: "Apa ibu kota Indonesia?",
                    options: ["Jakarta", "Surabaya", "Bandung", "Medan"],
                    correct: 0
                },
                {
                    question: "Berapa jumlah planet di tata surya kita?",
                    options: ["7", "8", "9", "10"],
                    correct: 1
                },
                {
                    question: "Siapa penemu bola lampu?",
                    options: ["Albert Einstein", "Thomas Edison", "Nikola Tesla", "Alexander Graham Bell"],
                    correct: 1
                },
                {
                    question: "Apa nama galaksi tempat Bumi berada?",
                    options: ["Andromeda", "Bima Sakti", "Triangulum", "Sombrero"],
                    correct: 1
                },
                {
                    question: "Berapa jumlah benua di dunia?",
                    options: ["5", "6", "7", "8"],
                    correct: 2
                }
            ];
            
            let currentQuestionIndex = 0;
            let score = 0;
            let answered = false;
            
            function loadQuestion() {
                answered = false;
                const question = questions[currentQuestionIndex];
                document.getElementById('quizQuestion').textContent = question.question;
                document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
                document.getElementById('progressFill').style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
                
                const optionsContainer = document.getElementById('quizOptions');
                optionsContainer.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'quiz-option';
                    optionDiv.textContent = option;
                    optionDiv.addEventListener('click', () => selectAnswer(index));
                    optionsContainer.appendChild(optionDiv);
                });
            }
            
            function selectAnswer(index) {
                if (answered) return;
                answered = true;
                
                const question = questions[currentQuestionIndex];
                const options = document.querySelectorAll('.quiz-option');
                
                if (index === question.correct) {
                    options[index].classList.add('correct');
                    score++;
                } else {
                    options[index].classList.add('incorrect');
                    options[question.correct].classList.add('correct');
                }
                
                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < questions.length) {
                        loadQuestion();
                    } else {
                        showResults();
                    }
                }, 1500);
            }
            
            function showResults() {
                const percentage = (score / questions.length) * 100;
                let title, message, type;
                
                if (percentage === 100) {
                    title = "Perfect!";
                    message = "You got all questions right! 🎉";
                    type = "success";
                } else if (percentage >= 80) {
                    title = "Excellent!";
                    message = "You know your stuff! 🌟";
                    type = "success";
                } else if (percentage >= 60) {
                    title = "Good Job!";
                    message = "Keep learning! 👍";
                    type = "info";
                } else {
                    title = "Nice Try!";
                    message = "Better luck next time! 📚";
                    type = "warning";
                }
                
                document.getElementById('quizQuestion').innerHTML = `
                    <h3>Quiz Complete!</h3>
                    <p>Your Score: ${score}/${questions.length} (${percentage}%)</p>
                    <p>${message}</p>
                `;
                document.getElementById('quizOptions').innerHTML = '';
                document.getElementById('currentQuestion').textContent = questions.length;
                document.getElementById('progressFill').style.width = '100%';
                
                setTimeout(() => {
                    showAlert(type, title, `Your Score: ${score}/${questions.length} (${percentage}%)`, 'New Quiz', 'Close', 
                                () => { initQuizGame(); }, 
                                () => { closeGame(); });
                }, 500);
            }
            
            loadQuestion();
        }

        // Color Match Game
        function getColorMatchHTML() {
            return `
                <div class="game-header">
                    <h2>Color Match Game</h2>
                    <p>Pilih warna yang sesuai dengan teks!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="colorScore">0</span></div>
                    <div>High Score: <span id="colorHighScore">0</span></div>
                </div>
                <div class="color-match-container">
                    <div class="color-display" id="colorDisplay"></div>
                    <div class="color-options" id="colorOptions"></div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initColorMatch()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initColorMatch() {
            const colorDisplay = document.getElementById('colorDisplay');
            const colorOptions = document.getElementById('colorOptions');
            const colors = [
                { name: 'Merah', value: '#FF0000' },
                { name: 'Hijau', value: '#00FF00' },
                { name: 'Biru', value: '#0000FF' },
                { name: 'Kuning', value: '#FFFF00' },
                { name: 'Ungu', value: '#800080' },
                { name: 'Oranye', value: '#FFA500' },
                { name: 'Pink', value: '#FFC0CB' },
                { name: 'Coklat', value: '#A52A2A' }
            ];
            
            let score = 0;
            let highScore = localStorage.getItem('colorHighScore') || 0;
            let currentColor = null;
            let currentText = null;
            let gameActive = true;
            
            document.getElementById('colorHighScore').textContent = highScore;
            document.getElementById('colorScore').textContent = score;
            
            function generateRound() {
                if (!gameActive) return;
                
                // Select random color for text
                currentText = colors[Math.floor(Math.random() * colors.length)];
                
                // Select random color for display (can be same or different)
                currentColor = colors[Math.floor(Math.random() * colors.length)];
                
                // Set display
                colorDisplay.style.backgroundColor = currentColor.value;
                colorDisplay.textContent = currentText.name;
                colorDisplay.style.color = '#FFFFFF';
                colorDisplay.style.display = 'flex';
                colorDisplay.style.alignItems = 'center';
                colorDisplay.style.justifyContent = 'center';
                colorDisplay.style.fontSize = '2rem';
                colorDisplay.style.fontWeight = 'bold';
                
                // Create options
                colorOptions.innerHTML = '';
                
                // Add correct answer
                const correctOption = document.createElement('div');
                correctOption.className = 'color-option';
                correctOption.style.backgroundColor = currentText.value;
                correctOption.addEventListener('click', () => checkAnswer(true));
                colorOptions.appendChild(correctOption);
                
                // Add wrong answers
                const wrongColors = colors.filter(c => c.name !== currentText.name);
                const shuffledWrongColors = wrongColors.sort(() => Math.random() - 0.5).slice(0, 3);
                
                shuffledWrongColors.forEach(color => {
                    const option = document.createElement('div');
                    option.className = 'color-option';
                    option.style.backgroundColor = color.value;
                    option.addEventListener('click', () => checkAnswer(false));
                    colorOptions.appendChild(option);
                });
                
                // Shuffle all options
                const allOptions = Array.from(colorOptions.children);
                allOptions.sort(() => Math.random() - 0.5);
                colorOptions.innerHTML = '';
                allOptions.forEach(option => colorOptions.appendChild(option));
            }
            
            function checkAnswer(isCorrect) {
                if (!gameActive) return;
                gameActive = false;
                
                const options = document.querySelectorAll('.color-option');
                
                if (isCorrect) {
                    score++;
                    document.getElementById('colorScore').textContent = score;
                    
                    // Find and highlight correct option
                    options.forEach(option => {
                        if (option.style.backgroundColor === currentText.value) {
                            option.classList.add('correct');
                        }
                    });
                } else {
                    // Find and highlight incorrect and correct options
                    options.forEach(option => {
                        if (option.style.backgroundColor === currentText.value) {
                            option.classList.add('correct');
                        } else {
                            option.classList.add('incorrect');
                        }
                    });
                }
                
                setTimeout(() => {
                    gameActive = true;
                    generateRound();
                }, 1500);
            }
            
            generateRound();
        }

        // Catch the Ball Game
        function getCatchBallHTML() {
            return `
                <div class="game-header">
                    <h2>Catch the Ball</h2>
                    <p>Gunakan tombol kontrol atau geser untuk memindahkan keranjang!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="catchScore">0</span></div>
                    <div>Lives: <span id="catchLives">3</span></div>
                </div>
                <canvas id="catchBallCanvas" width="350" height="400"></canvas>
                <div class="catch-ball-controls">
                    <button class="control-btn" id="leftBtn"><i class="fas fa-arrow-left"></i></button>
                    <button class="control-btn" id="rightBtn"><i class="fas fa-arrow-right"></i></button>
                </div>
                <div class="game-buttons">
                    <button class="game-btn primary" onclick="startCatchBall()">Start Game</button>
                    <button class="game-btn secondary" onclick="pauseCatchBall()">Pause</button>
                </div>
            `;
        }

        function initCatchBall() {
            const canvas = document.getElementById('catchBallCanvas');
            const ctx = canvas.getContext('2d');
            const leftBtn = document.getElementById('leftBtn');
            const rightBtn = document.getElementById('rightBtn');
            
            let basket = {
                x: canvas.width / 2 - 40,
                y: canvas.height - 60,
                width: 80,
                height: 20,
                speed: 8
            };
            
            let balls = [];
            let score = 0;
            let lives = 3;
            let gameRunning = false;
            let ballSpeed = 2;
            let ballInterval = 1500;
            let lastBallTime = 0;
            
            document.getElementById('catchScore').textContent = score;
            document.getElementById('catchLives').textContent = lives;
            
            // Touch controls
            let touchStartX = 0;
            canvas.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
            });
            
            canvas.addEventListener('touchmove', (e) => {
                if (!gameRunning) return;
                e.preventDefault();
                
                const touchX = e.touches[0].clientX;
                const diffX = touchX - touchStartX;
                
                basket.x += diffX * 0.5;
                
                // Keep basket within bounds
                if (basket.x < 0) basket.x = 0;
                if (basket.x + basket.width > canvas.width) basket.x = canvas.width - basket.width;
                
                touchStartX = touchX;
            });
            
            // Button controls
            let leftPressed = false;
            let rightPressed = false;
            
            leftBtn.addEventListener('touchstart', () => leftPressed = true);
            leftBtn.addEventListener('touchend', () => leftPressed = false);
            leftBtn.addEventListener('mousedown', () => leftPressed = true);
            leftBtn.addEventListener('mouseup', () => leftPressed = false);
            
            rightBtn.addEventListener('touchstart', () => rightPressed = true);
            rightBtn.addEventListener('touchend', () => rightPressed = false);
            rightBtn.addEventListener('mousedown', () => rightPressed = true);
            rightBtn.addEventListener('mouseup', () => rightPressed = false);
            
            window.startCatchBall = function() {
                if (gameRunning) return;
                gameRunning = true;
                score = 0;
                lives = 3;
                balls = [];
                ballSpeed = 2;
                ballInterval = 1500;
                document.getElementById('catchScore').textContent = score;
                document.getElementById('catchLives').textContent = lives;
                gameLoop();
            };
            
            window.pauseCatchBall = function() {
                gameRunning = false;
            };
            
            function createBall() {
                balls.push({
                    x: Math.random() * (canvas.width - 20) + 10,
                    y: -20,
                    radius: 10,
                    color: `hsl(${Math.random() * 360}, 70%, 60%)`
                });
            }
            
            function updateBalls() {
                for (let i = balls.length - 1; i >= 0; i--) {
                    const ball = balls[i];
                    ball.y += ballSpeed;
                    
                    // Check if ball caught by basket
                    if (
                        ball.y + ball.radius >= basket.y &&
                        ball.y - ball.radius <= basket.y + basket.height &&
                        ball.x >= basket.x &&
                        ball.x <= basket.x + basket.width
                    ) {
                        balls.splice(i, 1);
                        score++;
                        document.getElementById('catchScore').textContent = score;
                        
                        // Increase difficulty
                        if (score % 5 === 0) {
                            ballSpeed += 0.5;
                            ballInterval = Math.max(800, ballInterval - 100);
                        }
                    }
                    // Check if ball hit the ground
                    else if (ball.y - ball.radius > canvas.height) {
                        balls.splice(i, 1);
                        lives--;
                        document.getElementById('catchLives').textContent = lives;
                        
                        if (lives <= 0) {
                            gameOver();
                        }
                    }
                }
            }
            
            function drawBasket() {
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(basket.x, basket.y, basket.width, basket.height);
                
                // Draw basket pattern
                ctx.strokeStyle = '#654321';
                ctx.lineWidth = 2;
                for (let i = 0; i < basket.width; i += 10) {
                    ctx.beginPath();
                    ctx.moveTo(basket.x + i, basket.y);
                    ctx.lineTo(basket.x + i, basket.y + basket.height);
                    ctx.stroke();
                }
            }
            
            function drawBalls() {
                balls.forEach(ball => {
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                    ctx.fillStyle = ball.color;
                    ctx.fill();
                    
                    // Add shine effect
                    ctx.beginPath();
                    ctx.arc(ball.x - 3, ball.y - 3, ball.radius / 3, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                    ctx.fill();
                });
            }
            
            function gameLoop() {
                if (!gameRunning) return;
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw background
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#87CEEB');
                gradient.addColorStop(1, '#98D8E8');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Move basket based on button controls
                if (leftPressed && basket.x > 0) {
                    basket.x -= basket.speed;
                }
                if (rightPressed && basket.x + basket.width < canvas.width) {
                    basket.x += basket.speed;
                }
                
                // Create new balls at intervals
                const now = Date.now();
                if (now - lastBallTime > ballInterval) {
                    createBall();
                    lastBallTime = now;
                }
                
                // Update and draw game elements
                updateBalls();
                drawBasket();
                drawBalls();
                
                requestAnimationFrame(gameLoop);
            }
            
            function gameOver() {
                gameRunning = false;
                showAlert('game-over', 'Game Over', `Your score: ${score}`, 'Try Again', 'Close', 
                            () => { startCatchBall(); }, 
                            () => { closeGame(); });
            }
        }

        // Word Puzzle Game
        function getWordPuzzleHTML() {
            return `
                <div class="game-header">
                    <h2>Word Puzzle</h2>
                    <p>Selesaikan teka-teki kata dengan petunjuk yang diberikan!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="wordScore">0</span></div>
                    <div>Level: <span id="wordLevel">1</span></div>
                </div>
                <div class="word-puzzle-container">
                    <div class="word-display" id="wordDisplay"></div>
                    <div class="word-hint" id="wordHint"></div>
                    <input type="text" class="word-input" id="wordInput" placeholder="Ketik jawaban Anda di sini">
                    <div class="word-buttons">
                        <button class="game-btn primary" onclick="checkWordAnswer()">Submit</button>
                        <button class="game-btn secondary" onclick="getHint()">Hint</button>
                    </div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initWordPuzzle()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initWordPuzzle() {
            const words = [
                { word: 'JAKARTA', hint: 'Ibu kota Indonesia', letters: ['J', 'A', 'K', 'A', 'R', 'T', 'A'] },
                { word: 'KOMPUTER', hint: 'Perangkat elektronik untuk pemrosesan data', letters: ['K', 'O', 'M', 'P', 'U', 'T', 'E', 'R'] },
                { word: 'BOLA', hint: 'Olahraga dengan 11 pemain per tim', letters: ['B', 'O', 'L', 'A'] },
                { word: 'GADGET', hint: 'Perangkat elektronik portabel', letters: ['G', 'A', 'D', 'G', 'E', 'T'] },
                { word: 'MUSIK', hint: 'Seni suara yang melodius', letters: ['M', 'U', 'S', 'I', 'K'] },
                { word: 'INTERNET', hint: 'Jaringan global komputer', letters: ['I', 'N', 'T', 'E', 'R', 'N', 'E', 'T'] },
                { word: 'GAME', hint: 'Aktivitas hiburan interaktif', letters: ['G', 'A', 'M', 'E'] },
                { word: 'MOBIL', hint: 'Kendaraan roda empat', letters: ['M', 'O', 'B', 'I', 'L'] }
            ];
            
            let currentWordIndex = 0;
            let score = 0;
            let level = 1;
            let hintsUsed = 0;
            let currentWord = null;
            
            function loadWord() {
                // Shuffle words and pick one
                const shuffledWords = [...words].sort(() => Math.random() - 0.5);
                currentWord = shuffledWords[currentWordIndex % words.length];
                
                // Display word with blanks
                const wordDisplay = document.getElementById('wordDisplay');
                wordDisplay.textContent = currentWord.word.split('').map(() => '_').join(' ');
                
                // Display hint
                document.getElementById('wordHint').textContent = `Petunjuk: ${currentWord.hint}`;
                
                // Clear input
                document.getElementById('wordInput').value = '';
                
                // Reset hints used
                hintsUsed = 0;
            }
            
            window.checkWordAnswer = function() {
                const userAnswer = document.getElementById('wordInput').value.toUpperCase().trim();
                
                if (userAnswer === currentWord.word) {
                    score += Math.max(10 - hintsUsed * 2, 2); // Fewer points if hints used
                    document.getElementById('wordScore').textContent = score;
                    
                    // Level up every 3 correct answers
                    if (score > 0 && score % 30 === 0) {
                        level++;
                        document.getElementById('wordLevel').textContent = level;
                        showAlert('success', 'Level Up!', `Anda sekarang di level ${level}!`, 'Continue', 'Close', 
                                    () => { loadWord(); }, 
                                    () => { closeGame(); });
                    } else {
                        showAlert('success', 'Correct!', 'Lanjut ke kata berikutnya.', 'Continue', 'Close', 
                                    () => { loadWord(); }, 
                                    () => { closeGame(); });
                    }
                    
                    currentWordIndex++;
                    loadWord();
                } else {
                    // Check if answer is close
                    let correctChars = 0;
                    for (let i = 0; i < Math.min(userAnswer.length, currentWord.word.length); i++) {
                        if (userAnswer[i] === currentWord.word[i]) {
                            correctChars++;
                        }
                    }
                    
                    if (correctChars >= currentWord.word.length * 0.7) {
                        showAlert('warning', 'Almost Correct!', 'Hampir benar! Coba lagi.', 'Try Again', 'Close', 
                                    () => { document.getElementById('wordInput').value = ''; }, 
                                    () => { closeGame(); });
                    } else {
                        showAlert('error', 'Incorrect', 'Jawaban salah. Coba lagi.', 'Try Again', 'Close', 
                                    () => { document.getElementById('wordInput').value = ''; }, 
                                    () => { closeGame(); });
                    }
                }
            };
            
            window.getHint = function() {
                if (hintsUsed >= 2) {
                    showAlert('warning', 'No More Hints', 'Anda sudah menggunakan semua petunjuk untuk kata ini.', 'OK', '', 
                                () => { return; });
                    return;
                }
                
                hintsUsed++;
                const wordDisplay = document.getElementById('wordDisplay');
                const currentDisplay = wordDisplay.textContent.split(' ');
                const wordArray = currentWord.word.split('');
                
                // Reveal random letters
                const hiddenIndices = [];
                for (let i = 0; i < wordArray.length; i++) {
                    if (currentDisplay[i] === '_') {
                        hiddenIndices.push(i);
                    }
                }
                
                if (hiddenIndices.length > 0) {
                    const randomIndex = hiddenIndices[Math.floor(Math.random() * hiddenIndices.length)];
                    currentDisplay[randomIndex] = wordArray[randomIndex];
                    wordDisplay.textContent = currentDisplay.join(' ');
                }
            };
            
            // Initialize game
            document.getElementById('wordScore').textContent = score;
            document.getElementById('wordLevel').textContent = level;
            loadWord();
            
            // Allow submitting with Enter key
            document.getElementById('wordInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkWordAnswer();
                }
            });
        }

        // Pong Game
        function getPongGameHTML() {
            return `
                <div class="game-header">
                    <h2>Pong Game</h2>
                    <p>Gunakan W/S untuk paddle kiri dan Arrow Up/Down untuk paddle kanan!</p>
                </div>
                <div class="game-info">
                    <div>Player 1: <span id="pongScore1">0</span></div>
                    <div>Player 2: <span id="pongScore2">0</span></div>
                </div>
                <canvas id="pongCanvas" width="600" height="400"></canvas>
                <div class="game-controls">
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startPongGame()">Start Game</button>
                        <button class="game-btn secondary" onclick="pausePongGame()">Pause</button>
                    </div>
                </div>
            `;
        }

        function initPongGame() {
            const canvas = document.getElementById('pongCanvas');
            const ctx = canvas.getContext('2d');
            
            // Game objects
            const ball = {
                x: canvas.width / 2,
                y: canvas.height / 2,
                radius: 10,
                velocityX: 5,
                velocityY: 5,
                speed: 5,
                color: '#fff'
            };
            
            const player1 = {
                x: 10,
                y: canvas.height / 2 - 50,
                width: 10,
                height: 100,
                color: '#fff',
                score: 0
            };
            
            const player2 = {
                x: canvas.width - 20,
                y: canvas.height / 2 - 50,
                width: 10,
                height: 100,
                color: '#fff',
                score: 0
            };
            
            const net = {
                x: canvas.width / 2 - 1,
                y: 0,
                width: 2,
                height: 10,
                color: '#fff'
            };
            
            let gameRunning = false;
            
            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                if (!gameRunning) return;
                
                switch(e.key) {
                    case 'w':
                    case 'W':
                        if (player1.y > 0) player1.y -= 20;
                        break;
                    case 's':
                    case 'S':
                        if (player1.y + player1.height < canvas.height) player1.y += 20;
                        break;
                    case 'ArrowUp':
                        if (player2.y > 0) player2.y -= 20;
                        break;
                    case 'ArrowDown':
                        if (player2.y + player2.height < canvas.height) player2.y += 20;
                        break;
                }
            });
            
            window.startPongGame = function() {
                if (gameRunning) return;
                gameRunning = true;
                resetBall();
                gameLoop();
            };
            
            window.pausePongGame = function() {
                gameRunning = false;
            };
            
            function resetBall() {
                ball.x = canvas.width / 2;
                ball.y = canvas.height / 2;
                ball.velocityX = -ball.velocityX;
                ball.speed = 5;
            }
            
            function drawRect(x, y, w, h, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x, y, w, h);
            }
            
            function drawCircle(x, y, r, color) {
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2, false);
                ctx.closePath();
                ctx.fill();
            }
            
            function drawNet() {
                for (let i = 0; i <= canvas.height; i += 15) {
                    drawRect(net.x, net.y + i, net.width, net.height, net.color);
                }
            }
            
            function collision(b, p) {
                p.top = p.y;
                p.bottom = p.y + p.height;
                p.left = p.x;
                p.right = p.x + p.width;
                
                b.top = b.y - b.radius;
                b.bottom = b.y + b.radius;
                b.left = b.x - b.radius;
                b.right = b.x + b.radius;
                
                return b.right > p.left && b.bottom > p.top && b.left < p.right && b.top < p.bottom;
            }
            
            function update() {
                if (!gameRunning) return;
                
                // Move the ball
                ball.x += ball.velocityX;
                ball.y += ball.velocityY;
                
                // Simple AI for player2
                const computerLevel = 0.1;
                player2.y += (ball.y - (player2.y + player2.height / 2)) * computerLevel;
                
                // Ball collision with top and bottom walls
                if (ball.y - ball.radius < 0 || ball.y + ball.radius > canvas.height) {
                    ball.velocityY = -ball.velocityY;
                }
                
                // Check which player scored
                let player = (ball.x < canvas.width / 2) ? player1 : player2;
                
                // Ball collision with paddles
                if (collision(ball, player)) {
                    // Calculate where the ball hit the paddle
                    let collidePoint = ball.y - (player.y + player.height / 2);
                    collidePoint = collidePoint / (player.height / 2);
                    
                    // Calculate angle in Radian
                    let angleRad = collidePoint * Math.PI / 4;
                    
                    // Direction of ball when hit
                    let direction = (ball.x < canvas.width / 2) ? 1 : -1;
                    
                    // Change velocity of ball
                    ball.velocityX = direction * ball.speed * Math.cos(angleRad);
                    ball.velocityY = ball.speed * Math.sin(angleRad);
                    
                    // Increase ball speed
                    ball.speed += 0.5;
                }
                
                // Update scores
                if (ball.x - ball.radius < 0) {
                    player2.score++;
                    document.getElementById('pongScore2').textContent = player2.score;
                    resetBall();
                } else if (ball.x + ball.radius > canvas.width) {
                    player1.score++;
                    document.getElementById('pongScore1').textContent = player1.score;
                    resetBall();
                }
                
                // Check for winner
                if (player1.score >= 5 || player2.score >= 5) {
                    gameRunning = false;
                    const winner = player1.score >= 5 ? "Player 1" : "Player 2";
                    showAlert('win', 'Game Over!', `${winner} wins the game!`, 'Play Again', 'Close', 
                                () => { 
                                    player1.score = 0;
                                    player2.score = 0;
                                    document.getElementById('pongScore1').textContent = player1.score;
                                    document.getElementById('pongScore2').textContent = player2.score;
                                    startPongGame(); 
                                }, 
                                () => { closeGame(); });
                }
            }
            
            function render() {
                // Clear canvas
                drawRect(0, 0, canvas.width, canvas.height, '#000');
                
                // Draw net
                drawNet();
                
                // Draw paddles
                drawRect(player1.x, player1.y, player1.width, player1.height, player1.color);
                drawRect(player2.x, player2.y, player2.width, player2.height, player2.color);
                
                // Draw ball
                drawCircle(ball.x, ball.y, ball.radius, ball.color);
            }
            
            function gameLoop() {
                if (!gameRunning) return;
                update();
                render();
                requestAnimationFrame(gameLoop);
            }
            
            // Initial render
            render();
        }

        // 2048 Game
        function get2048GameHTML() {
            return `
                <div class="game-header">
                    <h2>2048 Game</h2>
                    <p>Gunakan arrow keys atau swipe untuk menggabungkan angka!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="game2048Score">0</span></div>
                    <div>Best: <span id="game2048Best">0</span></div>
                </div>
                <div class="game-2048-container">
                    <div class="game-2048-grid" id="game2048Grid"></div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="init2048Game()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function init2048Game() {
            const grid = document.getElementById('game2048Grid');
            let board = [];
            let score = 0;
            let best = localStorage.getItem('2048Best') || 0;
            let size = 4;
            
            document.getElementById('game2048Best').textContent = best;
            
            // Initialize board
            function initBoard() {
                board = Array(size).fill().map(() => Array(size).fill(0));
                score = 0;
                document.getElementById('game2048Score').textContent = score;
                addNewTile();
                addNewTile();
                updateDisplay();
            }
            
            // Add a new tile (2 or 4) to a random empty cell
            function addNewTile() {
                const emptyCells = [];
                for (let r = 0; r < size; r++) {
                    for (let c = 0; c < size; c++) {
                        if (board[r][c] === 0) {
                            emptyCells.push({r, c});
                        }
                    }
                }
                
                if (emptyCells.length > 0) {
                    const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                    board[randomCell.r][randomCell.c] = Math.random() < 0.9 ? 2 : 4;
                }
            }
            
            // Update the display
            function updateDisplay() {
                grid.innerHTML = '';
                for (let r = 0; r < size; r++) {
                    for (let c = 0; c < size; c++) {
                        const cell = document.createElement('div');
                        cell.className = 'game-2048-cell';
                        if (board[r][c] !== 0) {
                            cell.textContent = board[r][c];
                            cell.setAttribute('data-value', board[r][c]);
                        }
                        grid.appendChild(cell);
                    }
                }
            }
            
            // Move tiles in a direction
            function move(direction) {
                let moved = false;
                const newBoard = JSON.parse(JSON.stringify(board));
                
                if (direction === 'left') {
                    for (let r = 0; r < size; r++) {
                        const row = newBoard[r].filter(val => val !== 0);
                        for (let c = 0; c < row.length - 1; c++) {
                            if (row[c] === row[c + 1]) {
                                row[c] *= 2;
                                score += row[c];
                                row.splice(c + 1, 1);
                            }
                        }
                        while (row.length < size) {
                            row.push(0);
                        }
                        newBoard[r] = row;
                    }
                } else if (direction === 'right') {
                    for (let r = 0; r < size; r++) {
                        const row = newBoard[r].filter(val => val !== 0);
                        for (let c = row.length - 1; c > 0; c--) {
                            if (row[c] === row[c - 1]) {
                                row[c] *= 2;
                                score += row[c];
                                row.splice(c - 1, 1);
                                c--;
                            }
                        }
                        while (row.length < size) {
                            row.unshift(0);
                        }
                        newBoard[r] = row;
                    }
                } else if (direction === 'up') {
                    for (let c = 0; c < size; c++) {
                        const column = [];
                        for (let r = 0; r < size; r++) {
                            if (newBoard[r][c] !== 0) {
                                column.push(newBoard[r][c]);
                            }
                        }
                        for (let r = 0; r < column.length - 1; r++) {
                            if (column[r] === column[r + 1]) {
                                column[r] *= 2;
                                score += column[r];
                                column.splice(r + 1, 1);
                            }
                        }
                        while (column.length < size) {
                            column.push(0);
                        }
                        for (let r = 0; r < size; r++) {
                            newBoard[r][c] = column[r];
                        }
                    }
                } else if (direction === 'down') {
                    for (let c = 0; c < size; c++) {
                        const column = [];
                        for (let r = 0; r < size; r++) {
                            if (newBoard[r][c] !== 0) {
                                column.push(newBoard[r][c]);
                            }
                        }
                        for (let r = column.length - 1; r > 0; r--) {
                            if (column[r] === column[r - 1]) {
                                column[r] *= 2;
                                score += column[r];
                                column.splice(r - 1, 1);
                                r--;
                            }
                        }
                        while (column.length < size) {
                            column.unshift(0);
                        }
                        for (let r = 0; r < size; r++) {
                            newBoard[r][c] = column[r];
                        }
                    }
                }
                
                // Check if board changed
                for (let r = 0; r < size; r++) {
                    for (let c = 0; c < size; c++) {
                        if (board[r][c] !== newBoard[r][c]) {
                            moved = true;
                            break;
                        }
                    }
                }
                
                if (moved) {
                    board = newBoard;
                    addNewTile();
                    updateDisplay();
                    document.getElementById('game2048Score').textContent = score;
                    
                    if (score > best) {
                        best = score;
                        localStorage.setItem('2048Best', best);
                        document.getElementById('game2048Best').textContent = best;
                    }
                    
                    // Check for game over
                    if (isGameOver()) {
                        setTimeout(() => {
                            showAlert('info', 'Game Over', `Your score: ${score}`, 'Try Again', 'Close', 
                                        () => { init2048Game(); }, 
                                        () => { closeGame(); });
                        }, 300);
                    }
                    
                    // Check for win
                    if (hasWon()) {
                        setTimeout(() => {
                            showAlert('win', 'Congratulations!', `You reached 2048! Your score: ${score}`, 'Play Again', 'Close', 
                                        () => { init2048Game(); }, 
                                        () => { closeGame(); });
                        }, 300);
                    }
                }
            }
            
            // Check if game is over
            function isGameOver() {
                // Check for empty cells
                for (let r = 0; r < size; r++) {
                    for (let c = 0; c < size; c++) {
                        if (board[r][c] === 0) return false;
                    }
                }
                
                // Check for possible merges
                for (let r = 0; r < size; r++) {
                    for (let c = 0; c < size; c++) {
                        const current = board[r][c];
                        if (
                            (r < size - 1 && board[r + 1][c] === current) ||
                            (c < size - 1 && board[r][c + 1] === current)
                        ) {
                            return false;
                        }
                    }
                }
                
                return true;
            }
            
            // Check if player has won
            function hasWon() {
                for (let r = 0; r < size; r++) {
                    for (let c = 0; c < size; c++) {
                        if (board[r][c] === 2048) return true;
                    }
                }
                return false;
            }
            
            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    move('left');
                } else if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    move('right');
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    move('up');
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    move('down');
                }
            });
            
            // Touch controls for mobile
            let touchStartX = 0;
            let touchStartY = 0;
            
            grid.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
            });
            
            grid.addEventListener('touchend', (e) => {
                if (!touchStartX || !touchStartY) return;
                
                const touchEndX = e.changedTouches[0].clientX;
                const touchEndY = e.changedTouches[0].clientY;
                
                const dx = touchEndX - touchStartX;
                const dy = touchEndY - touchStartY;
                
                if (Math.abs(dx) > Math.abs(dy)) {
                    if (dx > 0) {
                        move('right');
                    } else {
                        move('left');
                    }
                } else {
                    if (dy > 0) {
                        move('down');
                    } else {
                        move('up');
                    }
                }
                
                touchStartX = 0;
                touchStartY = 0;
            });
            
            // Initialize game
            initBoard();
        }

        // Brick Breaker Game
        function getBrickBreakerHTML() {
            return `
                <div class="game-header">
                    <h2>Brick Breaker</h2>
                    <p>Gunakan mouse atau arrow keys untuk memindahkan paddle!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="brickScore">0</span></div>
                    <div>Lives: <span id="brickLives">3</span></div>
                </div>
                <canvas id="brickBreakerCanvas" width="600" height="400"></canvas>
                <div class="game-controls">
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startBrickBreaker()">Start Game</button>
                        <button class="game-btn secondary" onclick="pauseBrickBreaker()">Pause</button>
                    </div>
                </div>
            `;
        }

        function initBrickBreaker() {
            const canvas = document.getElementById('brickBreakerCanvas');
            const ctx = canvas.getContext('2d');
            
            // Game variables
            let paddle = {
                width: 100,
                height: 10,
                x: canvas.width / 2 - 50,
                y: canvas.height - 20,
                speed: 8
            };
            
            let ball = {
                x: canvas.width / 2,
                y: canvas.height - 30,
                radius: 8,
                dx: 4,
                dy: -4
            };
            
            let bricks = [];
            let brickRowCount = 5;
            let brickColumnCount = 8;
            let brickWidth = 65;
            let brickHeight = 20;
            let brickPadding = 10;
            let brickOffsetTop = 30;
            let brickOffsetLeft = 30;
            
            let score = 0;
            let lives = 3;
            let gameRunning = false;
            
            // Initialize bricks
            function initBricks() {
                for (let c = 0; c < brickColumnCount; c++) {
                    bricks[c] = [];
                    for (let r = 0; r < brickRowCount; r++) {
                        // Different colors for different rows
                        let color;
                        switch(r) {
                            case 0: color = '#ff6b6b'; break;
                            case 1: color = '#feca57'; break;
                            case 2: color = '#48dbfb'; break;
                            case 3: color = '#ff9ff3'; break;
                            case 4: color = '#54a0ff'; break;
                        }
                        
                        bricks[c][r] = { 
                            x: 0, 
                            y: 0, 
                            status: 1,
                            color: color
                        };
                    }
                }
            }
            
            // Keyboard controls
            let rightPressed = false;
            let leftPressed = false;
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Right' || e.key === 'ArrowRight') {
                    rightPressed = true;
                } else if (e.key === 'Left' || e.key === 'ArrowLeft') {
                    leftPressed = true;
                }
            });
            
            document.addEventListener('keyup', (e) => {
                if (e.key === 'Right' || e.key === 'ArrowRight') {
                    rightPressed = false;
                } else if (e.key === 'Left' || e.key === 'ArrowLeft') {
                    leftPressed = false;
                }
            });
            
            // Mouse controls
            document.addEventListener('mousemove', (e) => {
                if (!gameRunning) return;
                const relativeX = e.clientX - canvas.offsetLeft;
                if (relativeX > 0 && relativeX < canvas.width) {
                    paddle.x = relativeX - paddle.width / 2;
                }
            });
            
            window.startBrickBreaker = function() {
                if (gameRunning) return;
                gameRunning = true;
                score = 0;
                lives = 3;
                document.getElementById('brickScore').textContent = score;
                document.getElementById('brickLives').textContent = lives;
                
                // Reset ball position
                ball.x = canvas.width / 2;
                ball.y = canvas.height - 30;
                ball.dx = 4;
                ball.dy = -4;
                
                // Reset paddle position
                paddle.x = canvas.width / 2 - paddle.width / 2;
                
                // Initialize bricks
                initBricks();
                
                gameLoop();
            };
            
            window.pauseBrickBreaker = function() {
                gameRunning = false;
            };
            
            function collisionDetection() {
                for (let c = 0; c < brickColumnCount; c++) {
                    for (let r = 0; r < brickRowCount; r++) {
                        const b = bricks[c][r];
                        if (b.status === 1) {
                            if (
                                ball.x > b.x && 
                                ball.x < b.x + brickWidth && 
                                ball.y > b.y && 
                                ball.y < b.y + brickHeight
                            ) {
                                ball.dy = -ball.dy;
                                b.status = 0;
                                score += 10;
                                document.getElementById('brickScore').textContent = score;
                                
                                // Check if all bricks are destroyed
                                if (score === brickRowCount * brickColumnCount * 10) {
                                    gameRunning = false;
                                    showAlert('win', 'Congratulations!', 'You destroyed all the bricks!', 'Play Again', 'Close', 
                                                () => { startBrickBreaker(); }, 
                                                () => { closeGame(); });
                                }
                            }
                        }
                    }
                }
            }
            
            function drawBall() {
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                ctx.fillStyle = '#fff';
                ctx.fill();
                ctx.closePath();
            }
            
            function drawPaddle() {
                ctx.beginPath();
                ctx.rect(paddle.x, paddle.y, paddle.width, paddle.height);
                ctx.fillStyle = '#fff';
                ctx.fill();
                ctx.closePath();
            }
            
            function drawBricks() {
                for (let c = 0; c < brickColumnCount; c++) {
                    for (let r = 0; r < brickRowCount; r++) {
                        if (bricks[c][r].status === 1) {
                            const brickX = c * (brickWidth + brickPadding) + brickOffsetLeft;
                            const brickY = r * (brickHeight + brickPadding) + brickOffsetTop;
                            bricks[c][r].x = brickX;
                            bricks[c][r].y = brickY;
                            ctx.beginPath();
                            ctx.rect(brickX, brickY, brickWidth, brickHeight);
                            ctx.fillStyle = bricks[c][r].color;
                            ctx.fill();
                            ctx.closePath();
                        }
                    }
                }
            }
            
            function gameLoop() {
                if (!gameRunning) return;
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw game elements
                drawBricks();
                drawBall();
                drawPaddle();
                collisionDetection();
                
                // Ball movement
                ball.x += ball.dx;
                ball.y += ball.dy;
                
                // Ball collision with walls
                if (ball.x + ball.dx > canvas.width - ball.radius || ball.x + ball.dx < ball.radius) {
                    ball.dx = -ball.dx;
                }
                if (ball.y + ball.dy < ball.radius) {
                    ball.dy = -ball.dy;
                } else if (ball.y + ball.dy > canvas.height - ball.radius) {
                    // Ball collision with paddle
                    if (ball.x > paddle.x && ball.x < paddle.x + paddle.width) {
                        ball.dy = -ball.dy;
                        
                        // Change ball direction based on where it hits the paddle
                        const hitPos = (ball.x - paddle.x) / paddle.width;
                        ball.dx = 8 * (hitPos - 0.5);
                    } else {
                        // Ball missed the paddle
                        lives--;
                        document.getElementById('brickLives').textContent = lives;
                        
                        if (lives === 0) {
                            gameRunning = false;
                            showAlert('game-over', 'Game Over', `Your score: ${score}`, 'Try Again', 'Close', 
                                        () => { startBrickBreaker(); }, 
                                        () => { closeGame(); });
                        } else {
                            // Reset ball position
                            ball.x = canvas.width / 2;
                            ball.y = canvas.height - 30;
                            ball.dx = 4;
                            ball.dy = -4;
                            paddle.x = canvas.width / 2 - paddle.width / 2;
                        }
                    }
                }
                
                // Paddle movement
                if (rightPressed && paddle.x < canvas.width - paddle.width) {
                    paddle.x += paddle.speed;
                } else if (leftPressed && paddle.x > 0) {
                    paddle.x -= paddle.speed;
                }
                
                requestAnimationFrame(gameLoop);
            }
            
            // Initial draw
            initBricks();
            drawBricks();
            drawBall();
            drawPaddle();
        }

        // Rock Paper Scissors Game
        function getRockPaperScissorsHTML() {
            return `
                <div class="game-header">
                    <h2>Rock Paper Scissors</h2>
                    <p>Pilih antara batu, gunting, atau kertas!</p>
                </div>
                <div class="rps-container">
                    <div class="rps-scores">
                        <div>Player: <span id="rpsPlayerScore">0</span></div>
                        <div>Computer: <span id="rpsComputerScore">0</span></div>
                    </div>
                    <div class="rps-choices">
                        <div class="rps-choice" data-choice="rock">
                            <i class="fas fa-hand-rock"></i>
                        </div>
                        <div class="rps-choice" data-choice="paper">
                            <i class="fas fa-hand-paper"></i>
                        </div>
                        <div class="rps-choice" data-choice="scissors">
                            <i class="fas fa-hand-scissors"></i>
                        </div>
                    </div>
                    <div class="rps-result" id="rpsResult">
                        Make your choice!
                    </div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initRockPaperScissors()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initRockPaperScissors() {
            const choices = document.querySelectorAll('.rps-choice');
            const resultDiv = document.getElementById('rpsResult');
            let playerScore = 0;
            let computerScore = 0;
            
            document.getElementById('rpsPlayerScore').textContent = playerScore;
            document.getElementById('rpsComputerScore').textContent = computerScore;
            resultDiv.innerHTML = 'Make your choice!';
            
            choices.forEach(choice => {
                choice.addEventListener('click', function() {
                    const playerChoice = this.getAttribute('data-choice');
                    const computerChoice = getComputerChoice();
                    const result = determineWinner(playerChoice, computerChoice);
                    
                    // Display choices
                    const playerIcon = this.innerHTML;
                    let computerIcon = '';
                    
                    if (computerChoice === 'rock') {
                        computerIcon = '<i class="fas fa-hand-rock"></i>';
                    } else if (computerChoice === 'paper') {
                        computerIcon = '<i class="fas fa-hand-paper"></i>';
                    } else {
                        computerIcon = '<i class="fas fa-hand-scissors"></i>';
                    }
                    
                    // Display result
                    resultDiv.innerHTML = `
                        <div>You chose: ${playerIcon}</div>
                        <div>Computer chose: ${computerIcon}</div>
                        <div style="margin-top: 10px; font-weight: bold;">${result.message}</div>
                    `;
                    
                    // Update scores
                    if (result.winner === 'player') {
                        playerScore++;
                        document.getElementById('rpsPlayerScore').textContent = playerScore;
                    } else if (result.winner === 'computer') {
                        computerScore++;
                        document.getElementById('rpsComputerScore').textContent = computerScore;
                    }
                    
                    // Check for game over
                    if (playerScore === 5 || computerScore === 5) {
                        const winner = playerScore === 5 ? 'You' : 'Computer';
                        setTimeout(() => {
                            showAlert('win', 'Game Over!', `${winner} won the game!`, 'Play Again', 'Close', 
                                        () => { 
                                            playerScore = 0;
                                            computerScore = 0;
                                            document.getElementById('rpsPlayerScore').textContent = playerScore;
                                            document.getElementById('rpsComputerScore').textContent = computerScore;
                                            resultDiv.innerHTML = 'Make your choice!';
                                        }, 
                                        () => { closeGame(); });
                        }, 500);
                    }
                });
            });
            
            function getComputerChoice() {
                const choices = ['rock', 'paper', 'scissors'];
                return choices[Math.floor(Math.random() * choices.length)];
            }
            
            function determineWinner(playerChoice, computerChoice) {
                if (playerChoice === computerChoice) {
                    return { winner: 'tie', message: "It's a tie!" };
                }
                
                if (
                    (playerChoice === 'rock' && computerChoice === 'scissors') ||
                    (playerChoice === 'paper' && computerChoice === 'rock') ||
                    (playerChoice === 'scissors' && computerChoice === 'paper')
                ) {
                    return { winner: 'player', message: 'You win this round!' };
                }
                
                return { winner: 'computer', message: 'Computer wins this round!' };
            }
        }

        // Sudoku Game
        function getSudokuHTML() {
            return `
                <div class="game-header">
                    <h2>Sudoku</h2>
                    <p>Isi grid 9x9 dengan angka 1-9 tanpa pengulangan!</p>
                </div>
                <div class="game-info">
                    <div>Time: <span id="sudokuTime">00:00</span></div>
                    <div>Mistakes: <span id="sudokuMistakes">0/3</span></div>
                </div>
                <div class="sudoku-container">
                    <div class="sudoku-grid" id="sudokuGrid"></div>
                    <div class="sudoku-controls" id="sudokuControls">
                        <div class="sudoku-number" data-number="1">1</div>
                        <div class="sudoku-number" data-number="2">2</div>
                        <div class="sudoku-number" data-number="3">3</div>
                        <div class="sudoku-number" data-number="4">4</div>
                        <div class="sudoku-number" data-number="5">5</div>
                        <div class="sudoku-number" data-number="6">6</div>
                        <div class="sudoku-number" data-number="7">7</div>
                        <div class="sudoku-number" data-number="8">8</div>
                        <div class="sudoku-number" data-number="9">9</div>
                    </div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initSudoku()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initSudoku() {
            const grid = document.getElementById('sudokuGrid');
            const controls = document.getElementById('sudokuControls');
            let board = [];
            let solution = [];
            let selectedCell = null;
            let mistakes = 0;
            let startTime = Date.now();
            
            // Generate a simple Sudoku puzzle
            function generateSudoku() {
                // Create a solved Sudoku board
                solution = [
                    [5,3,4,6,7,8,9,1,2],
                    [6,7,2,1,9,5,3,4,8],
                    [1,9,8,3,4,2,5,6,7],
                    [8,5,9,7,6,1,4,2,3],
                    [4,2,6,8,5,3,7,9,1],
                    [7,1,3,9,2,4,8,5,6],
                    [9,6,1,5,3,7,2,8,4],
                    [2,8,7,4,1,9,6,3,5],
                    [3,4,5,2,8,6,1,7,9]
                ];
                
                // Create a copy for the puzzle
                board = solution.map(row => [...row]);
                
                // Remove numbers to create the puzzle (easy difficulty)
                const cellsToRemove = 40;
                let removed = 0;
                
                while (removed < cellsToRemove) {
                    const row = Math.floor(Math.random() * 9);
                    const col = Math.floor(Math.random() * 9);
                    
                    if (board[row][col] !== 0) {
                        board[row][col] = 0;
                        removed++;
                    }
                }
            }
            
            // Display the Sudoku board
            function displayBoard() {
                grid.innerHTML = '';
                
                for (let row = 0; row < 9; row++) {
                    for (let col = 0; col < 9; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'sudoku-cell';
                        cell.dataset.row = row;
                        cell.dataset.col = col;
                        
                        if (board[row][col] !== 0) {
                            cell.textContent = board[row][col];
                            cell.classList.add('fixed');
                        }
                        
                        cell.addEventListener('click', selectCell);
                        grid.appendChild(cell);
                    }
                }
            }
            
            // Select a cell
            function selectCell(e) {
                if (e.target.classList.contains('fixed')) return;
                
                // Remove previous selection
                if (selectedCell) {
                    selectedCell.classList.remove('selected');
                }
                
                // Select new cell
                selectedCell = e.target;
                selectedCell.classList.add('selected');
            }
            
            // Number controls
            controls.querySelectorAll('.sudoku-number').forEach(number => {
                number.addEventListener('click', function() {
                    if (!selectedCell) return;
                    
                    const row = parseInt(selectedCell.dataset.row);
                    const col = parseInt(selectedCell.dataset.col);
                    const value = parseInt(this.dataset.number);
                    
                    // Check if the move is valid
                    if (solution[row][col] === value) {
                        selectedCell.textContent = value;
                        selectedCell.classList.remove('error');
                        
                        // Check if puzzle is complete
                        if (isPuzzleComplete()) {
                            clearInterval(window.sudokuTimer);
                            showAlert('win', 'Congratulations!', 'You solved the puzzle!', 'New Game', 'Close', 
                                        () => { initSudoku(); }, 
                                        () => { closeGame(); });
                        }
                    } else {
                        selectedCell.textContent = value;
                        selectedCell.classList.add('error');
                        
                        mistakes++;
                        document.getElementById('sudokuMistakes').textContent = `${mistakes}/3`;
                        
                        if (mistakes >= 3) {
                            clearInterval(window.sudokuTimer);
                            showAlert('game-over', 'Game Over', 'You made too many mistakes.', 'Try Again', 'Close', 
                                        () => { initSudoku(); }, 
                                        () => { closeGame(); });
                        }
                    }
                });
            });
            
            // Check if the puzzle is complete
            function isPuzzleComplete() {
                for (let row = 0; row < 9; row++) {
                    for (let col = 0; col < 9; col++) {
                        if (board[row][col] === 0) {
                            const cell = document.querySelector(`.sudoku-cell[data-row="${row}"][data-col="${col}"]`);
                            if (!cell.textContent || cell.classList.contains('error')) {
                                return false;
                            }
                        }
                    }
                }
                return true;
            }
            
            // Update timer
            if (window.sudokuTimer) clearInterval(window.sudokuTimer);
            window.sudokuTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
                const seconds = (elapsed % 60).toString().padStart(2, '0');
                document.getElementById('sudokuTime').textContent = `${minutes}:${seconds}`;
            }, 1000);
            
            // Initialize game
            mistakes = 0;
            document.getElementById('sudokuMistakes').textContent = `${mistakes}/3`;
            startTime = Date.now();
            generateSudoku();
            displayBoard();
        }

        // New Games Implementation
        
        // Space Shooter Game
        function getSpaceShooterHTML() {
            return `
                <div class="game-header">
                    <h2>Space Shooter</h2>
                    <p>Gunakan arrow keys untuk bergerak dan spasi untuk menembak!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="spaceShooterScore">0</span></div>
                    <div>Lives: <span id="spaceShooterLives">3</span></div>
                </div>
                <canvas id="spaceShooterCanvas" width="600" height="400"></canvas>
                <div class="game-controls">
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startSpaceShooterGame()">Start Game</button>
                        <button class="game-btn secondary" onclick="pauseSpaceShooterGame()">Pause</button>
                    </div>
                </div>
            `;
        }

        function initSpaceShooterGame() {
            const canvas = document.getElementById('spaceShooterCanvas');
            const ctx = canvas.getContext('2d');
            
            // Game variables
            let player = {
                x: canvas.width / 2 - 25,
                y: canvas.height - 60,
                width: 50,
                height: 50,
                speed: 5
            };
            
            let bullets = [];
            let asteroids = [];
            let particles = [];
            let score = 0;
            let lives = 3;
            let gameRunning = false;
            let keys = {};
            
            document.getElementById('spaceShooterScore').textContent = score;
            document.getElementById('spaceShooterLives').textContent = lives;
            
            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                keys[e.key] = true;
                
                if (e.key === ' ' && gameRunning) {
                    e.preventDefault();
                    shootBullet();
                }
            });
            
            document.addEventListener('keyup', (e) => {
                keys[e.key] = false;
            });
            
            window.startSpaceShooterGame = function() {
                if (gameRunning) return;
                gameRunning = true;
                score = 0;
                lives = 3;
                bullets = [];
                asteroids = [];
                particles = [];
                document.getElementById('spaceShooterScore').textContent = score;
                document.getElementById('spaceShooterLives').textContent = lives;
                gameLoop();
            };
            
            window.pauseSpaceShooterGame = function() {
                gameRunning = false;
            };
            
            function shootBullet() {
                bullets.push({
                    x: player.x + player.width / 2 - 2,
                    y: player.y,
                    width: 4,
                    height: 10,
                    speed: 7
                });
            }
            
            function createAsteroid() {
                const size = Math.random() * 30 + 20;
                asteroids.push({
                    x: Math.random() * (canvas.width - size),
                    y: -size,
                    width: size,
                    height: size,
                    speed: Math.random() * 2 + 1,
                    rotation: 0,
                    rotationSpeed: Math.random() * 0.1 - 0.05
                });
            }
            
            function createParticles(x, y) {
                for (let i = 0; i < 15; i++) {
                    particles.push({
                        x: x,
                        y: y,
                        vx: (Math.random() - 0.5) * 8,
                        vy: (Math.random() - 0.5) * 8,
                        size: Math.random() * 3 + 1,
                        life: 1
                    });
                }
            }
            
            function updatePlayer() {
                if (keys['ArrowLeft'] && player.x > 0) {
                    player.x -= player.speed;
                }
                if (keys['ArrowRight'] && player.x < canvas.width - player.width) {
                    player.x += player.speed;
                }
            }
            
            function updateBullets() {
                for (let i = bullets.length - 1; i >= 0; i--) {
                    bullets[i].y -= bullets[i].speed;
                    
                    // Remove bullets that go off screen
                    if (bullets[i].y < 0) {
                        bullets.splice(i, 1);
                    }
                }
            }
            
            function updateAsteroids() {
                // Create new asteroids at intervals
                if (Math.random() < 0.02) {
                    createAsteroid();
                }
                
                for (let i = asteroids.length - 1; i >= 0; i--) {
                    asteroids[i].y += asteroids[i].speed;
                    asteroids[i].rotation += asteroids[i].rotationSpeed;
                    
                    // Remove asteroids that go off screen
                    if (asteroids[i].y > canvas.height) {
                        asteroids.splice(i, 1);
                    }
                }
            }
            
            function updateParticles() {
                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].x += particles[i].vx;
                    particles[i].y += particles[i].vy;
                    particles[i].life -= 0.02;
                    
                    if (particles[i].life <= 0) {
                        particles.splice(i, 1);
                    }
                }
            }
            
            function checkCollisions() {
                // Check bullet-asteroid collisions
                for (let i = bullets.length - 1; i >= 0; i--) {
                    for (let j = asteroids.length - 1; j >= 0; j--) {
                        if (
                            bullets[i].x < asteroids[j].x + asteroids[j].width &&
                            bullets[i].x + bullets[i].width > asteroids[j].x &&
                            bullets[i].y < asteroids[j].y + asteroids[j].height &&
                            bullets[i].y + bullets[i].height > asteroids[j].y
                        ) {
                            // Create explosion particles
                            createParticles(
                                asteroids[j].x + asteroids[j].width / 2,
                                asteroids[j].y + asteroids[j].height / 2
                            );
                            
                            // Remove bullet and asteroid
                            bullets.splice(i, 1);
                            asteroids.splice(j, 1);
                            
                            // Increase score
                            score += 10;
                            document.getElementById('spaceShooterScore').textContent = score;
                            
                            break;
                        }
                    }
                }
                
                // Check player-asteroid collisions
                for (let i = asteroids.length - 1; i >= 0; i--) {
                    if (
                        player.x < asteroids[i].x + asteroids[i].width &&
                        player.x + player.width > asteroids[i].x &&
                        player.y < asteroids[i].y + asteroids[i].height &&
                        player.y + player.height > asteroids[i].y
                    ) {
                        // Create explosion particles
                        createParticles(
                            asteroids[i].x + asteroids[i].width / 2,
                            asteroids[i].y + asteroids[i].height / 2
                        );
                        
                        // Remove asteroid
                        asteroids.splice(i, 1);
                        
                        // Decrease lives
                        lives--;
                        document.getElementById('spaceShooterLives').textContent = lives;
                        
                        if (lives <= 0) {
                            gameRunning = false;
                            showAlert('game-over', 'Game Over', `Your score: ${score}`, 'Try Again', 'Close', 
                                        () => { startSpaceShooterGame(); }, 
                                        () => { closeGame(); });
                        }
                        
                        break;
                    }
                }
            }
            
            function drawPlayer() {
                // Draw spaceship shape
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.moveTo(player.x + player.width / 2, player.y);
                ctx.lineTo(player.x, player.y + player.height);
                ctx.lineTo(player.x + player.width / 2, player.y + player.height - 10);
                ctx.lineTo(player.x + player.width, player.y + player.height);
                ctx.closePath();
                ctx.fill();
            }
            
            function drawBullets() {
                ctx.fillStyle = '#FFEB3B';
                bullets.forEach(bullet => {
                    ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
                });
            }
            
            function drawAsteroids() {
                ctx.fillStyle = '#9E9E9E';
                asteroids.forEach(asteroid => {
                    ctx.save();
                    ctx.translate(asteroid.x + asteroid.width / 2, asteroid.y + asteroid.height / 2);
                    ctx.rotate(asteroid.rotation);
                    ctx.fillRect(-asteroid.width / 2, -asteroid.height / 2, asteroid.width, asteroid.height);
                    ctx.restore();
                });
            }
            
            function drawParticles() {
                particles.forEach(particle => {
                    ctx.fillStyle = `rgba(255, 255, 255, ${particle.life})`;
                    ctx.fillRect(particle.x, particle.y, particle.size, particle.size);
                });
            }
            
            function drawStars() {
                // Draw static stars in background
                ctx.fillStyle = 'white';
                for (let i = 0; i < 100; i++) {
                    const x = (i * 137.5) % canvas.width;
                    const y = (i * 89.7) % canvas.height;
                    const size = (i % 3) + 1;
                    ctx.fillRect(x, y, size, size);
                }
            }
            
            function gameLoop() {
                if (!gameRunning) return;
                
                // Clear canvas
                ctx.fillStyle = 'black';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw game elements
                drawStars();
                drawPlayer();
                drawBullets();
                drawAsteroids();
                drawParticles();
                
                // Update game elements
                updatePlayer();
                updateBullets();
                updateAsteroids();
                updateParticles();
                checkCollisions();
                
                requestAnimationFrame(gameLoop);
            }
        }

        // Flappy Bird Game
        function getFlappyBirdHTML() {
            return `
                <div class="game-header">
                    <h2>Flappy Bird</h2>
                    <p>Ketuk layar untuk membuat burung terbang!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="flappyBirdScore">0</span></div>
                    <div>Best: <span id="flappyBirdBest">0</span></div>
                </div>
                <canvas id="flappyBirdCanvas" width="350" height="500"></canvas>
                <div class="game-controls">
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startFlappyBirdGame()">Start Game</button>
                        <button class="game-btn secondary" onclick="pauseFlappyBirdGame()">Pause</button>
                    </div>
                </div>
            `;
        }

        function initFlappyBirdGame() {
            const canvas = document.getElementById('flappyBirdCanvas');
            const ctx = canvas.getContext('2d');
            
            // Game variables
            let bird = {
                x: 50,
                y: canvas.height / 2,
                radius: 15,
                velocity: 0,
                gravity: 0.5,
                jump: -8
            };
            
            let pipes = [];
            let score = 0;
            let best = localStorage.getItem('flappyBirdBest') || 0;
            let gameRunning = false;
            let frameCount = 0;
            
            document.getElementById('flappyBirdBest').textContent = best;
            
            // Touch/click controls
            canvas.addEventListener('click', () => {
                if (gameRunning) {
                    bird.velocity = bird.jump;
                }
            });
            
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                if (gameRunning) {
                    bird.velocity = bird.jump;
                }
            });
            
            window.startFlappyBirdGame = function() {
                if (gameRunning) return;
                gameRunning = true;
                bird.y = canvas.height / 2;
                bird.velocity = 0;
                pipes = [];
                score = 0;
                frameCount = 0;
                document.getElementById('flappyBirdScore').textContent = score;
                gameLoop();
            };
            
            window.pauseFlappyBirdGame = function() {
                gameRunning = false;
            };
            
            function createPipe() {
                const gap = 120;
                const minHeight = 50;
                const maxHeight = canvas.height - gap - minHeight;
                const height = Math.floor(Math.random() * maxHeight) + minHeight;
                
                pipes.push({
                    x: canvas.width,
                    y: 0,
                    width: 60,
                    height: height,
                    passed: false
                });
                
                pipes.push({
                    x: canvas.width,
                    y: height + gap,
                    width: 60,
                    height: canvas.height - height - gap,
                    passed: false
                });
            }
            
            function updateBird() {
                bird.velocity += bird.gravity;
                bird.y += bird.velocity;
                
                // Check boundaries
                if (bird.y + bird.radius > canvas.height) {
                    gameOver();
                    return;
                }
                
                if (bird.y - bird.radius < 0) {
                    bird.y = bird.radius;
                    bird.velocity = 0;
                }
            }
            
            function updatePipes() {
                // Create new pipes at intervals
                if (frameCount % 100 === 0) {
                    createPipe();
                }
                
                // Move pipes
                for (let i = pipes.length - 1; i >= 0; i--) {
                    pipes[i].x -= 2;
                    
                    // Remove pipes that are off screen
                    if (pipes[i].x + pipes[i].width < 0) {
                        pipes.splice(i, 1);
                    }
                    
                    // Check if bird passed the pipe
                    if (!pipes[i].passed && pipes[i].x + pipes[i].width < bird.x) {
                        pipes[i].passed = true;
                        score++;
                        document.getElementById('flappyBirdScore').textContent = score;
                    }
                }
            }
            
            function checkCollisions() {
                for (let pipe of pipes) {
                    if (
                        bird.x + bird.radius > pipe.x &&
                        bird.x - bird.radius < pipe.x + pipe.width &&
                        bird.y + bird.radius > pipe.y &&
                        bird.y - bird.radius < pipe.y + pipe.height
                    ) {
                        gameOver();
                        return;
                    }
                }
            }
            
            function gameOver() {
                gameRunning = false;
                
                if (score > best) {
                    best = score;
                    localStorage.setItem('flappyBirdBest', best);
                    document.getElementById('flappyBirdBest').textContent = best;
                    showAlert('success', 'New Best Score!', `Your score: ${score}!`, 'Play Again', 'Close', 
                                () => { startFlappyBirdGame(); }, 
                                () => { closeGame(); });
                } else {
                    showAlert('game-over', 'Game Over', `Your score: ${score}`, 'Try Again', 'Close', 
                                () => { startFlappyBirdGame(); }, 
                                () => { closeGame(); });
                }
            }
            
            function drawBird() {
                // Draw bird as a circle
                ctx.fillStyle = '#FFEB3B';
                ctx.beginPath();
                ctx.arc(bird.x, bird.y, bird.radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw eye
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(bird.x + 5, bird.y - 5, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw beak
                ctx.fillStyle = '#FF9800';
                ctx.beginPath();
                ctx.moveTo(bird.x + bird.radius, bird.y);
                ctx.lineTo(bird.x + bird.radius + 8, bird.y);
                ctx.lineTo(bird.x + bird.radius, bird.y + 5);
                ctx.closePath();
                ctx.fill();
            }
            
            function drawPipes() {
                ctx.fillStyle = '#4CAF50';
                pipes.forEach(pipe => {
                    ctx.fillRect(pipe.x, pipe.y, pipe.width, pipe.height);
                });
            }
            
            function drawBackground() {
                // Draw sky gradient
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#87CEEB');
                gradient.addColorStop(1, '#98D8E8');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw clouds
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                for (let i = 0; i < 3; i++) {
                    const x = (i * 150 + frameCount * 0.2) % (canvas.width + 100) - 50;
                    const y = 50 + i * 40;
                    
                    // Draw cloud with circles
                    ctx.beginPath();
                    ctx.arc(x, y, 25, 0, Math.PI * 2);
                    ctx.arc(x + 25, y, 35, 0, Math.PI * 2);
                    ctx.arc(x + 50, y, 25, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            function gameLoop() {
                if (!gameRunning) return;
                
                frameCount++;
                
                // Clear canvas and draw background
                drawBackground();
                
                // Draw game elements
                drawPipes();
                drawBird();
                
                // Update game elements
                updateBird();
                updatePipes();
                checkCollisions();
                
                requestAnimationFrame(gameLoop);
            }
        }

        // Hangman Game
        function getHangmanHTML() {
            return `
                <div class="game-header">
                    <h2>Hangman</h2>
                    <p>Tebak kata sebelum gambar hangman selesai!</p>
                </div>
                <div class="game-info">
                    <div>Mistakes: <span id="hangmanMistakes">0/6</span></div>
                    <div>Category: <span id="hangmanCategory">Animals</span></div>
                </div>
                <div class="hangman-container">
                    <div class="hangman-drawing" id="hangmanDrawing"></div>
                    <div class="hangman-word" id="hangmanWord"></div>
                    <div class="hangman-letters" id="hangmanLetters"></div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initHangmanGame()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initHangmanGame() {
            const words = {
                'Animals': ['ELEPHANT', 'GIRAFFE', 'PENGUIN', 'DOLPHIN', 'BUTTERFLY'],
                'Countries': ['INDONESIA', 'JAPAN', 'BRAZIL', 'CANADA', 'AUSTRALIA'],
                'Fruits': ['MANGO', 'STRAWBERRY', 'PINEAPPLE', 'WATERMELON', 'ORANGE'],
                'Sports': ['FOOTBALL', 'BASKETBALL', 'TENNIS', 'SWIMMING', 'VOLLEYBALL']
            };
            
            const categories = Object.keys(words);
            const randomCategory = categories[Math.floor(Math.random() * categories.length)];
            const categoryWords = words[randomCategory];
            const randomWord = categoryWords[Math.floor(Math.random() * categoryWords.length)];
            
            let word = randomWord.split('');
            let guessedLetters = [];
            let mistakes = 0;
            let maxMistakes = 6;
            
            document.getElementById('hangmanCategory').textContent = randomCategory;
            document.getElementById('hangmanMistakes').textContent = `${mistakes}/${maxMistakes}`;
            
            // Initialize word display
            updateWordDisplay();
            
            // Initialize letter buttons
            const lettersContainer = document.getElementById('hangmanLetters');
            lettersContainer.innerHTML = '';
            
            for (let i = 65; i <= 90; i++) {
                const letter = String.fromCharCode(i);
                const button = document.createElement('div');
                button.className = 'hangman-letter';
                button.textContent = letter;
                button.addEventListener('click', () => guessLetter(letter, button));
                lettersContainer.appendChild(button);
            }
            
            function updateWordDisplay() {
                const wordDisplay = document.getElementById('hangmanWord');
                wordDisplay.textContent = word.map(letter => 
                    guessedLetters.includes(letter) ? letter : '_'
                ).join(' ');
            }
            
            function updateDrawing() {
                const drawing = document.getElementById('hangmanDrawing');
                const stages = [
                    '', // 0 mistakes
                    '<div>🌳</div>', // 1 mistake - gallows
                    '<div>🌳\n😵</div>', // 2 mistakes - head
                    '<div>🌳\n😵\n|</div>', // 3 mistakes - body
                    '<div>🌳\n😵\n/|</div>', // 4 mistakes - one arm
                    '<div>🌳\n😵\n/|\\</div>', // 5 mistakes - both arms
                    '<div>🌳\n😵\n/|\\\n/ \\</div>' // 6 mistakes - both legs (game over)
                ];
                
                drawing.innerHTML = stages[mistakes];
            }
            
            function guessLetter(letter, button) {
                if (guessedLetters.includes(letter) || mistakes >= maxMistakes) return;
                
                guessedLetters.push(letter);
                button.classList.add('used');
                
                if (word.includes(letter)) {
                    button.classList.add('correct');
                    updateWordDisplay();
                    
                    // Check if word is complete
                    if (word.every(l => guessedLetters.includes(l))) {
                        setTimeout(() => {
                            showAlert('success', 'Congratulations!', 'You guessed the word!', 'Play Again', 'Close', 
                                        () => { initHangmanGame(); }, 
                                        () => { closeGame(); });
                        }, 300);
                    }
                } else {
                    button.classList.add('incorrect');
                    mistakes++;
                    document.getElementById('hangmanMistakes').textContent = `${mistakes}/${maxMistakes}`;
                    updateDrawing();
                    
                    if (mistakes >= maxMistakes) {
                        setTimeout(() => {
                            showAlert('error', 'Game Over', `The word was: ${word.join('')}`, 'Try Again', 'Close', 
                                        () => { initHangmanGame(); }, 
                                        () => { closeGame(); });
                        }, 300);
                    }
                }
            }
            
            // Initialize drawing
            updateDrawing();
        }

        // Math Challenge Game
        function getMathChallengeHTML() {
            return `
                <div class="game-header">
                    <h2>Math Challenge</h2>
                    <p>Selesaikan soal matematika secepat mungkin!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="mathScore">0</span></div>
                    <div>Time: <span id="mathTime">30</span></div>
                    <div>Level: <span id="mathLevel">1</span></div>
                </div>
                <div class="math-challenge-container">
                    <div class="math-question" id="mathQuestion"></div>
                    <input type="number" class="math-input" id="mathInput" placeholder="Your answer">
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="checkMathAnswer()">Submit</button>
                        <button class="game-btn secondary" onclick="initMathChallengeGame()">New Game</button>
                    </div>
                </div>
            `;
        }

        function initMathChallengeGame() {
            let score = 0;
            let level = 1;
            let timeLeft = 30;
            let currentQuestion = null;
            let correctAnswer = null;
            let gameActive = false;
            let timerInterval = null;
            
            document.getElementById('mathScore').textContent = score;
            document.getElementById('mathLevel').textContent = level;
            document.getElementById('mathTime').textContent = timeLeft;
            
            // Allow submitting with Enter key
            document.getElementById('mathInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && gameActive) {
                    checkMathAnswer();
                }
            });
            
            function generateQuestion() {
                const operations = ['+', '-', '*', '/'];
                const operation = operations[Math.floor(Math.random() * operations.length)];
                
                let num1, num2;
                
                // Adjust difficulty based on level
                if (level <= 2) {
                    // Easy: single digit numbers
                    num1 = Math.floor(Math.random() * 10) + 1;
                    num2 = Math.floor(Math.random() * 10) + 1;
                } else if (level <= 4) {
                    // Medium: two digit numbers
                    num1 = Math.floor(Math.random() * 20) + 1;
                    num2 = Math.floor(Math.random() * 20) + 1;
                } else {
                    // Hard: larger numbers
                    num1 = Math.floor(Math.random() * 50) + 1;
                    num2 = Math.floor(Math.random() * 50) + 1;
                }
                
                // For division, ensure it results in a whole number
                if (operation === '/') {
                    num1 = num2 * Math.floor(Math.random() * 10 + 1);
                }
                
                // Calculate correct answer
                switch (operation) {
                    case '+':
                        correctAnswer = num1 + num2;
                        break;
                    case '-':
                        correctAnswer = num1 - num2;
                        break;
                    case '*':
                        correctAnswer = num1 * num2;
                        break;
                    case '/':
                        correctAnswer = num1 / num2;
                        break;
                }
                
                currentQuestion = `${num1} ${operation} ${num2}`;
                document.getElementById('mathQuestion').textContent = currentQuestion + ' = ?';
                document.getElementById('mathInput').value = '';
                document.getElementById('mathInput').focus();
            }
            
            function startTimer() {
                clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    timeLeft--;
                    document.getElementById('mathTime').textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        gameActive = false;
                        showAlert('info', "Time's up!", `Your final score: ${score}`, 'Try Again', 'Close', 
                                    () => { initMathChallengeGame(); }, 
                                    () => { closeGame(); });
                    }
                }, 1000);
            }
            
            window.checkMathAnswer = function() {
                if (!gameActive) return;
                
                const userAnswer = parseInt(document.getElementById('mathInput').value);
                
                if (userAnswer === correctAnswer) {
                    score += level * 10;
                    document.getElementById('mathScore').textContent = score;
                    
                    // Level up every 5 correct answers
                    if (score > 0 && score % 50 === 0) {
                        level++;
                        document.getElementById('mathLevel').textContent = level;
                        timeLeft += 10; // Bonus time for leveling up
                        showAlert('success', 'Level Up!', `You're now at level ${level}!`, 'Continue', 'Close', 
                                    () => { 
                                        document.getElementById('mathInput').value = '';
                                        generateQuestion(); 
                                    }, 
                                    () => { closeGame(); });
                    } else {
                        generateQuestion();
                    }
                } else {
                    // Penalty for wrong answer
                    timeLeft = Math.max(0, timeLeft - 5);
                    document.getElementById('mathTime').textContent = timeLeft;
                    
                    // Shake animation for wrong answer
                    const input = document.getElementById('mathInput');
                    input.style.animation = 'shake 0.5s';
                    setTimeout(() => {
                        input.style.animation = '';
                    }, 500);
                }
            };
            
            // Start the game
            gameActive = true;
            generateQuestion();
            startTimer();
        }

        // Whack-a-Mole Game
        function getWhackAMoleHTML() {
            return `
                <div class="game-header">
                    <h2>Whack-a-Mole</h2>
                    <p>Pukul tikus yang muncul dari lubang!</p>
                </div>
                <div class="game-info">
                    <div>Score: <span id="whackScore">0</span></div>
                    <div>Time: <span id="whackTime">30</span></div>
                </div>
                <canvas id="whackAMoleCanvas" width="500" height="400"></canvas>
                <div class="game-controls">
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startWhackAMoleGame()">Start Game</button>
                        <button class="game-btn secondary" onclick="pauseWhackAMoleGame()">Pause</button>
                    </div>
                </div>
            `;
        }

        function initWhackAMoleGame() {
            const canvas = document.getElementById('whackAMoleCanvas');
            const ctx = canvas.getContext('2d');
            
            // Game variables
            let score = 0;
            let timeLeft = 30;
            let gameRunning = false;
            let timerInterval = null;
            let moleInterval = null;
            
            // Grid configuration
            const rows = 3;
            const cols = 3;
            const holeWidth = 120;
            const holeHeight = 80;
            const spacing = 40;
            const offsetX = (canvas.width - (cols * holeWidth + (cols - 1) * spacing)) / 2;
            const offsetY = (canvas.height - (rows * holeHeight + (rows - 1) * spacing)) / 2;
            
            // Moles array
            let moles = [];
            
            // Initialize moles
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    moles.push({
                        x: offsetX + col * (holeWidth + spacing),
                        y: offsetY + row * (holeHeight + spacing),
                        width: holeWidth,
                        height: holeHeight,
                        visible: false,
                        timer: 0,
                        maxTimer: 60 + Math.random() * 60, // 1-2 seconds at 60fps
                        hit: false
                    });
                }
            }
            
            document.getElementById('whackScore').textContent = score;
            document.getElementById('whackTime').textContent = timeLeft;
            
            // Mouse/touch controls
            canvas.addEventListener('click', (e) => {
                if (!gameRunning) return;
                
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Check if any mole was hit
                for (let mole of moles) {
                    if (
                        mole.visible &&
                        !mole.hit &&
                        x >= mole.x &&
                        x <= mole.x + mole.width &&
                        y >= mole.y &&
                        y <= mole.y + mole.height
                    ) {
                        mole.hit = true;
                        score += 10;
                        document.getElementById('whackScore').textContent = score;
                        break;
                    }
                }
            });
            
            canvas.addEventListener('touchstart', (e) => {
                if (!gameRunning) return;
                e.preventDefault();
                
                const rect = canvas.getBoundingClientRect();
                const touch = e.touches[0];
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                
                // Check if any mole was hit
                for (let mole of moles) {
                    if (
                        mole.visible &&
                        !mole.hit &&
                        x >= mole.x &&
                        x <= mole.x + mole.width &&
                        y >= mole.y &&
                        y <= mole.y + mole.height
                    ) {
                        mole.hit = true;
                        score += 10;
                        document.getElementById('whackScore').textContent = score;
                        break;
                    }
                }
            });
            
            window.startWhackAMoleGame = function() {
                if (gameRunning) return;
                gameRunning = true;
                score = 0;
                timeLeft = 30;
                document.getElementById('whackScore').textContent = score;
                document.getElementById('whackTime').textContent = timeLeft;
                
                // Reset all moles
                for (let mole of moles) {
                    mole.visible = false;
                    mole.timer = 0;
                    mole.hit = false;
                }
                
                startTimer();
                startMoleInterval();
                gameLoop();
            };
            
            window.pauseWhackAMoleGame = function() {
                gameRunning = false;
                clearInterval(timerInterval);
                clearInterval(moleInterval);
            };
            
            function startTimer() {
                clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    timeLeft--;
                    document.getElementById('whackTime').textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        clearInterval(moleInterval);
                        gameRunning = false;
                        showAlert('info', "Time's up!", `Your final score: ${score}`, 'Try Again', 'Close', 
                                    () => { startWhackAMoleGame(); }, 
                                    () => { closeGame(); });
                    }
                }, 1000);
            }
            
            function startMoleInterval() {
                clearInterval(moleInterval);
                moleInterval = setInterval(() => {
                    if (!gameRunning) return;
                    
                    // Try to show a new mole
                    const hiddenMoles = moles.filter(m => !m.visible);
                    if (hiddenMoles.length > 0) {
                        const randomMole = hiddenMoles[Math.floor(Math.random() * hiddenMoles.length)];
                        randomMole.visible = true;
                        randomMole.timer = 0;
                        randomMole.maxTimer = 60 + Math.random() * 60;
                        randomMole.hit = false;
                    }
                }, 800); // New mole every 800ms
            }
            
            function updateMoles() {
                for (let mole of moles) {
                    if (mole.visible) {
                        mole.timer++;
                        
                        // Hide mole after timer expires or if hit
                        if (mole.timer >= mole.maxTimer || mole.hit) {
                            mole.visible = false;
                        }
                    }
                }
            }
            
            function drawBackground() {
                // Draw grass
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw grass texture
                ctx.fillStyle = '#228B22';
                for (let i = 0; i < 200; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const height = Math.random() * 10 + 5;
                    ctx.fillRect(x, y, 2, height);
                }
            }
            
            function drawHoles() {
                ctx.fillStyle = '#654321';
                for (let mole of moles) {
                    // Draw hole
                    ctx.beginPath();
                    ctx.ellipse(
                        mole.x + mole.width / 2,
                        mole.y + mole.height / 2,
                        mole.width / 2,
                        mole.height / 3,
                        0, 0, Math.PI * 2
                    );
                    ctx.fill();
                }
            }
            
            function drawMoles() {
                for (let mole of moles) {
                    if (mole.visible) {
                        // Draw mole
                        ctx.fillStyle = mole.hit ? '#FF0000' : '#8B4513';
                        
                        // Body
                        ctx.beginPath();
                        ctx.ellipse(
                            mole.x + mole.width / 2,
                            mole.y + mole.height / 2,
                            mole.width / 3,
                            mole.height / 3,
                            0, 0, Math.PI * 2
                        );
                        ctx.fill();
                        
                        // Eyes
                        if (!mole.hit) {
                            ctx.fillStyle = 'white';
                            ctx.beginPath();
                            ctx.arc(
                                mole.x + mole.width / 2 - 10,
                                mole.y + mole.height / 2 - 5,
                                5, 0, Math.PI * 2
                            );
                            ctx.arc(
                                mole.x + mole.width / 2 + 10,
                                mole.y + mole.height / 2 - 5,
                                5, 0, Math.PI * 2
                            );
                            ctx.fill();
                            
                            // Pupils
                            ctx.fillStyle = 'black';
                            ctx.beginPath();
                            ctx.arc(
                                mole.x + mole.width / 2 - 10,
                                mole.y + mole.height / 2 - 5,
                                2, 0, Math.PI * 2
                            );
                            ctx.arc(
                                mole.x + mole.width / 2 + 10,
                                mole.y + mole.height / 2 - 5,
                                2, 0, Math.PI * 2
                            );
                            ctx.fill();
                        }
                        
                        // Nose
                        ctx.fillStyle = 'black';
                        ctx.beginPath();
                        ctx.arc(
                            mole.x + mole.width / 2,
                            mole.y + mole.height / 2 + 5,
                            3, 0, Math.PI * 2
                        );
                        ctx.fill();
                    }
                }
            }
            
            function gameLoop() {
                if (!gameRunning) return;
                
                // Update game state
                updateMoles();
                
                // Draw everything
                drawBackground();
                drawHoles();
                drawMoles();
                
                requestAnimationFrame(gameLoop);
            }
        }

        // Simon Says Game
        function getSimonSaysHTML() {
            return `
                <div class="game-header">
                    <h2>Simon Says</h2>
                    <p>Ikuti pola warna yang ditampilkan!</p>
                </div>
                <div class="game-info">
                    <div>Level: <span id="simonLevel">1</span></div>
                    <div>Score: <span id="simonScore">0</span></div>
                </div>
                <div class="simon-container">
                    <div class="simon-board" id="simonBoard">
                        <div class="simon-button red" data-color="red"></div>
                        <div class="simon-button green" data-color="green"></div>
                        <div class="simon-button blue" data-color="blue"></div>
                        <div class="simon-button yellow" data-color="yellow"></div>
                    </div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startSimonSaysGame()">Start Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initSimonSaysGame() {
            const buttons = document.querySelectorAll('.simon-button');
            let sequence = [];
            let playerSequence = [];
            let level = 1;
            let score = 0;
            let isPlaying = false;
            let isShowingSequence = false;
            
            document.getElementById('simonLevel').textContent = level;
            document.getElementById('simonScore').textContent = score;
            
            // Add click event listeners to buttons
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    if (!isPlaying || isShowingSequence) return;
                    
                    const color = button.getAttribute('data-color');
                    playerSequence.push(color);
                    
                    // Activate button animation
                    button.classList.add('active');
                    setTimeout(() => {
                        button.classList.remove('active');
                    }, 300);
                    
                    // Check if player's choice is correct
                    const currentIndex = playerSequence.length - 1;
                    if (playerSequence[currentIndex] !== sequence[currentIndex]) {
                        // Wrong choice
                        gameOver();
                        return;
                    }
                    
                    // Check if player completed the sequence
                    if (playerSequence.length === sequence.length) {
                        // Correct sequence completed
                        score += level * 10;
                        document.getElementById('simonScore').textContent = score;
                        
                        // Level up
                        level++;
                        document.getElementById('simonLevel').textContent = level;
                        
                        // Start next round after a short delay
                        setTimeout(() => {
                            nextRound();
                        }, 1000);
                    }
                });
            });
            
            function nextRound() {
                playerSequence = [];
                isShowingSequence = true;
                
                // Add a new color to the sequence
                const colors = ['red', 'green', 'blue', 'yellow'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                sequence.push(randomColor);
                
                // Show the sequence
                showSequence();
            }
            
            function showSequence() {
                let index = 0;
                
                const interval = setInterval(() => {
                    if (index >= sequence.length) {
                        clearInterval(interval);
                        isShowingSequence = false;
                        return;
                    }
                    
                    // Activate the button
                    const color = sequence[index];
                    const button = document.querySelector(`.simon-button.${color}`);
                    button.classList.add('active');
                    
                    // Play sound (if available)
                    playSound(color);
                    
                    // Deactivate after a short delay
                    setTimeout(() => {
                        button.classList.remove('active');
                    }, 500);
                    
                    index++;
                }, 800);
            }
            
            function playSound(color) {
                // Create a simple beep sound using Web Audio API
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Set frequency based on color
                switch (color) {
                    case 'red':
                        oscillator.frequency.value = 261.63; // C
                        break;
                    case 'green':
                        oscillator.frequency.value = 329.63; // E
                        break;
                    case 'blue':
                        oscillator.frequency.value = 392.00; // G
                        break;
                    case 'yellow':
                        oscillator.frequency.value = 523.25; // C (higher octave)
                        break;
                }
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.3);
            }
            
            function gameOver() {
                isPlaying = false;
                showAlert('error', 'Game Over', `Your score: ${score}`, 'Try Again', 'Close', 
                            () => { startSimonSaysGame(); }, 
                            () => { closeGame(); });
                
                // Flash all buttons
                buttons.forEach(button => {
                    button.classList.add('active');
                    setTimeout(() => {
                        button.classList.remove('active');
                    }, 500);
                });
            }
            
            window.startSimonSaysGame = function() {
                if (isPlaying) return;
                
                // Reset game state
                sequence = [];
                playerSequence = [];
                level = 1;
                score = 0;
                isPlaying = true;
                
                document.getElementById('simonLevel').textContent = level;
                document.getElementById('simonScore').textContent = score;
                
                // Start the first round
                nextRound();
            };
        }

        // Connect Four Game
        function getConnectFourHTML() {
            return `
                <div class="game-header">
                    <h2>Connect Four</h2>
                    <p>Susun empat bidak dalam satu baris untuk menang!</p>
                </div>
                <div class="game-info">
                    <div>Player <span id="connectCurrentPlayer">1</span>'s turn</div>
                </div>
                <div class="connect-four-container">
                    <div class="connect-four-board" id="connectFourBoard"></div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initConnectFourGame()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initConnectFourGame() {
            const board = document.getElementById('connectFourBoard');
            let rows = 6;
            let cols = 7;
            let gameBoard = Array(rows).fill().map(() => Array(cols).fill(0));
            let currentPlayer = 1;
            let gameActive = true;
            
            document.getElementById('connectCurrentPlayer').textContent = currentPlayer;
            
            // Create the game board
            board.innerHTML = '';
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'connect-four-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    cell.addEventListener('click', handleCellClick);
                    board.appendChild(cell);
                }
            }
            
            function handleCellClick(e) {
                if (!gameActive) return;
                
                const col = parseInt(e.target.dataset.col);
                
                // Find the lowest empty row in this column
                let row = -1;
                for (let r = rows - 1; r >= 0; r--) {
                    if (gameBoard[r][col] === 0) {
                        row = r;
                        break;
                    }
                }
                
                // If column is full, do nothing
                if (row === -1) return;
                
                // Update game board
                gameBoard[row][col] = currentPlayer;
                
                // Update UI
                const cell = document.querySelector(`.connect-four-cell[data-row="${row}"][data-col="${col}"]`);
                cell.classList.add(`player${currentPlayer}`);
                
                // Check for winner
                if (checkWinner(row, col)) {
                    gameActive = false;
                    showAlert('win', 'Game Over!', `Player ${currentPlayer} wins!`, 'Play Again', 'Close', 
                                () => { initConnectFourGame(); }, 
                                () => { closeGame(); });
                    return;
                }
                
                // Check for draw
                if (gameBoard.every(row => row.every(cell => cell !== 0))) {
                    gameActive = false;
                    showAlert('info', "It's a draw!", "The game ended in a draw!", 'Play Again', 'Close', 
                                () => { initConnectFourGame(); }, 
                                () => { closeGame(); });
                    return;
                }
                
                // Switch player
                currentPlayer = currentPlayer === 1 ? 2 : 1;
                document.getElementById('connectCurrentPlayer').textContent = currentPlayer;
            }
            
            function checkWinner(row, col) {
                const player = gameBoard[row][col];
                
                // Check horizontal
                let count = 1;
                
                // Check left
                for (let c = col - 1; c >= 0 && gameBoard[row][c] === player; c--) {
                    count++;
                }
                
                // Check right
                for (let c = col + 1; c < cols && gameBoard[row][c] === player; c++) {
                    count++;
                }
                
                if (count >= 4) {
                    highlightWinningCells(row, col, 'horizontal');
                    return true;
                }
                
                // Check vertical
                count = 1;
                
                // Check up
                for (let r = row - 1; r >= 0 && gameBoard[r][col] === player; r--) {
                    count++;
                }
                
                // Check down
                for (let r = row + 1; r < rows && gameBoard[r][col] === player; r++) {
                    count++;
                }
                
                if (count >= 4) {
                    highlightWinningCells(row, col, 'vertical');
                    return true;
                }
                
                // Check diagonal (top-left to bottom-right)
                count = 1;
                
                // Check up-left
                for (let r = row - 1, c = col - 1; r >= 0 && c >= 0 && gameBoard[r][c] === player; r--, c--) {
                    count++;
                }
                
                // Check down-right
                for (let r = row + 1, c = col + 1; r < rows && c < cols && gameBoard[r][c] === player; r++, c++) {
                    count++;
                }
                
                if (count >= 4) {
                    highlightWinningCells(row, col, 'diagonal1');
                    return true;
                }
                
                // Check diagonal (top-right to bottom-left)
                count = 1;
                
                // Check up-right
                for (let r = row - 1, c = col + 1; r >= 0 && c < cols && gameBoard[r][c] === player; r--, c++) {
                    count++;
                }
                
                // Check down-left
                for (let r = row + 1, c = col - 1; r < rows && c >= 0 && gameBoard[r][c] === player; r++, c--) {
                    count++;
                }
                
                if (count >= 4) {
                    highlightWinningCells(row, col, 'diagonal2');
                    return true;
                }
                
                return false;
            }
            
            function highlightWinningCells(row, col, direction) {
                const player = gameBoard[row][col];
                const cells = [];
                
                cells.push({row, col});
                
                if (direction === 'horizontal') {
                    // Check left
                    for (let c = col - 1; c >= 0 && gameBoard[row][c] === player; c--) {
                        cells.push({row, col: c});
                    }
                    
                    // Check right
                    for (let c = col + 1; c < cols && gameBoard[row][c] === player; c++) {
                        cells.push({row, col: c});
                    }
                } else if (direction === 'vertical') {
                    // Check up
                    for (let r = row - 1; r >= 0 && gameBoard[r][col] === player; r--) {
                        cells.push({row: r, col});
                    }
                    
                    // Check down
                    for (let r = row + 1; r < rows && gameBoard[r][col] === player; r++) {
                        cells.push({row: r, col});
                    }
                } else if (direction === 'diagonal1') {
                    // Check up-left
                    for (let r = row - 1, c = col - 1; r >= 0 && c >= 0 && gameBoard[r][c] === player; r--, c--) {
                        cells.push({row: r, col: c});
                    }
                    
                    // Check down-right
                    for (let r = row + 1, c = col + 1; r < rows && c < cols && gameBoard[r][c] === player; r++, c++) {
                        cells.push({row: r, col: c});
                    }
                } else if (direction === 'diagonal2') {
                    // Check up-right
                    for (let r = row - 1, c = col + 1; r >= 0 && c < cols && gameBoard[r][c] === player; r--, c++) {
                        cells.push({row: r, col: c});
                    }
                    
                    // Check down-left
                    for (let r = row + 1, c = col - 1; r < rows && c >= 0 && gameBoard[r][c] === player; r++, c--) {
                        cells.push({row: r, col: c});
                    }
                }
                
                // Highlight the winning cells
                cells.forEach(({row, col}) => {
                    const cell = document.querySelector(`.connect-four-cell[data-row="${row}"][data-col="${col}"]`);
                    cell.classList.add('winner');
                });
            }
        }

        // Word Search Game
        function getWordSearchHTML() {
            return `
                <div class="game-header">
                    <h2>Word Search</h2>
                    <p>Cari kata-kata tersembunyi dalam grid huruf!</p>
                </div>
                <div class="game-info">
                    <div>Words Found: <span id="wordsFound">0</span>/<span id="totalWords">0</span></div>
                </div>
                <div class="word-search-container">
                    <div class="word-search-grid" id="wordSearchGrid"></div>
                    <div class="word-search-words" id="wordSearchWords"></div>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="initWordSearchGame()">New Game</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initWordSearchGame() {
            const grid = document.getElementById('wordSearchGrid');
            const wordsContainer = document.getElementById('wordSearchWords');
            
            const gridSize = 10;
            const words = [
                'JAVASCRIPT',
                'HTML',
                'CSS',
                'REACT',
                'NODE',
                'PYTHON',
                'DATABASE',
                'ALGORITHM'
            ];
            
            let gridArray = [];
            let foundWords = [];
            let selectedCells = [];
            let isSelecting = false;
            
            document.getElementById('totalWords').textContent = words.length;
            document.getElementById('wordsFound').textContent = foundWords.length;
            
            // Initialize grid
            function initGrid() {
                gridArray = Array(gridSize).fill().map(() => Array(gridSize).fill(''));
                
                // Place words in the grid
                words.forEach(word => {
                    placeWord(word);
                });
                
                // Fill empty cells with random letters
                for (let row = 0; row < gridSize; row++) {
                    for (let col = 0; col < gridSize; col++) {
                        if (gridArray[row][col] === '') {
                            gridArray[row][col] = String.fromCharCode(65 + Math.floor(Math.random() * 26));
                        }
                    }
                }
                
                // Display the grid
                displayGrid();
                
                // Display the words to find
                displayWords();
            }
            
            function placeWord(word) {
                const directions = [
                    [0, 1],   // horizontal
                    [1, 0],   // vertical
                    [1, 1],   // diagonal down-right
                    [-1, 1],  // diagonal up-right
                    [0, -1],  // horizontal backward
                    [-1, 0],  // vertical backward
                    [-1, -1], // diagonal up-left
                    [1, -1]   // diagonal down-left
                ];
                
                let placed = false;
                let attempts = 0;
                
                while (!placed && attempts < 100) {
                    const direction = directions[Math.floor(Math.random() * directions.length)];
                    const startRow = Math.floor(Math.random() * gridSize);
                    const startCol = Math.floor(Math.random() * gridSize);
                    
                    if (canPlaceWord(word, startRow, startCol, direction)) {
                        for (let i = 0; i < word.length; i++) {
                            const row = startRow + i * direction[0];
                            const col = startCol + i * direction[1];
                            gridArray[row][col] = word[i];
                        }
                        placed = true;
                    }
                    
                    attempts++;
                }
            }
            
            function canPlaceWord(word, startRow, startCol, direction) {
                for (let i = 0; i < word.length; i++) {
                    const row = startRow + i * direction[0];
                    const col = startCol + i * direction[1];
                    
                    // Check if out of bounds
                    if (row < 0 || row >= gridSize || col < 0 || col >= gridSize) {
                        return false;
                    }
                    
                    // Check if cell is already occupied by a different letter
                    if (gridArray[row][col] !== '' && gridArray[row][col] !== word[i]) {
                        return false;
                    }
                }
                
                return true;
            }
            
            function displayGrid() {
                grid.innerHTML = '';
                
                for (let row = 0; row < gridSize; row++) {
                    for (let col = 0; col < gridSize; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'word-search-cell';
                        cell.textContent = gridArray[row][col];
                        cell.dataset.row = row;
                        cell.dataset.col = col;
                        
                        // Add mouse events
                        cell.addEventListener('mousedown', startSelection);
                        cell.addEventListener('mouseover', continueSelection);
                        cell.addEventListener('mouseup', endSelection);
                        
                        // Add touch events
                        cell.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            startSelection(e);
                        });
                        cell.addEventListener('touchmove', (e) => {
                            e.preventDefault();
                            const touch = e.touches[0];
                            const element = document.elementFromPoint(touch.clientX, touch.clientY);
                            if (element && element.classList.contains('word-search-cell')) {
                                continueSelection({target: element});
                            }
                        });
                        cell.addEventListener('touchend', (e) => {
                            e.preventDefault();
                            endSelection(e);
                        });
                        
                        grid.appendChild(cell);
                    }
                }
            }
            
            function displayWords() {
                wordsContainer.innerHTML = '';
                
                words.forEach(word => {
                    const wordElement = document.createElement('div');
                    wordElement.className = 'word-search-word';
                    wordElement.textContent = word;
                    
                    if (foundWords.includes(word)) {
                        wordElement.classList.add('found');
                    }
                    
                    wordsContainer.appendChild(wordElement);
                });
            }
            
            function startSelection(e) {
                isSelecting = true;
                selectedCells = [];
                const cell = e.target;
                selectedCells.push(cell);
                cell.classList.add('selected');
            }
            
            function continueSelection(e) {
                if (!isSelecting) return;
                
                const cell = e.target;
                
                // Check if cell is already selected
                if (selectedCells.includes(cell)) return;
                
                // Check if cell is adjacent to the last selected cell
                const lastCell = selectedCells[selectedCells.length - 1];
                const lastRow = parseInt(lastCell.dataset.row);
                const lastCol = parseInt(lastCell.dataset.col);
                const cellRow = parseInt(cell.dataset.row);
                const cellCol = parseInt(cell.dataset.col);
                
                // Allow selection only if adjacent (including diagonals)
                if (Math.abs(lastRow - cellRow) <= 1 && Math.abs(lastCol - cellCol) <= 1) {
                    selectedCells.push(cell);
                    cell.classList.add('selected');
                }
            }
            
            function endSelection(e) {
                if (!isSelecting) return;
                
                isSelecting = false;
                
                // Get the selected word
                const selectedWord = selectedCells.map(cell => cell.textContent).join('');
                
                // Check if it's a valid word
                if (words.includes(selectedWord) && !foundWords.includes(selectedWord)) {
                    foundWords.push(selectedWord);
                    document.getElementById('wordsFound').textContent = foundWords.length;
                    
                    // Mark cells as found
                    selectedCells.forEach(cell => {
                        cell.classList.remove('selected');
                        cell.classList.add('found');
                    });
                    
                    // Update word display
                    displayWords();
                    
                    // Check if all words are found
                    if (foundWords.length === words.length) {
                        setTimeout(() => {
                            showAlert('win', 'Congratulations!', 'You found all the words!', 'Play Again', 'Close', 
                                        () => { initWordSearchGame(); }, 
                                        () => { closeGame(); });
                        }, 300);
                    }
                } else {
                    // Clear selection
                    selectedCells.forEach(cell => {
                        cell.classList.remove('selected');
                    });
                }
                
                selectedCells = [];
            }
            
            // Initialize the game
            initGrid();
        }

        // Typing Speed Test Game
        function getTypingSpeedHTML() {
            return `
                <div class="game-header">
                    <h2>Typing Speed Test</h2>
                    <p>Uji kecepatan mengetik Anda!</p>
                </div>
                <div class="game-info">
                    <div>WPM: <span id="typingWPM">0</span></div>
                    <div>Accuracy: <span id="typingAccuracy">100%</span></div>
                    <div>Time: <span id="typingTime">60</span></div>
                </div>
                <div class="typing-test-container">
                    <div class="typing-text" id="typingText"></div>
                    <input type="text" class="typing-input" id="typingInput" placeholder="Start typing here..." disabled>
                    <div class="game-buttons">
                        <button class="game-btn primary" onclick="startTypingSpeedTest()">Start Test</button>
                        <button class="game-btn secondary" onclick="closeGame()">Close</button>
                    </div>
                </div>
            `;
        }

        function initTypingSpeedGame() {
            const textElement = document.getElementById('typingText');
            const inputElement = document.getElementById('typingInput');
            const wpmElement = document.getElementById('typingWPM');
            const accuracyElement = document.getElementById('typingAccuracy');
            const timeElement = document.getElementById('typingTime');
            
            const sampleTexts = [
                "The quick brown fox jumps over the lazy dog. This pangram sentence contains every letter of the alphabet at least once.",
                "Technology has revolutionized the way we communicate, work, and live. From smartphones to artificial intelligence, innovation continues to shape our future.",
                "Learning to type quickly and accurately is a valuable skill in today's digital world. Practice makes perfect, so keep typing to improve your speed.",
                "JavaScript is a versatile programming language that powers interactive web pages and modern applications. It's essential for front-end and back-end development.",
                "The ocean covers more than 70% of Earth's surface and contains 97% of Earth's water. Despite its importance, we've explored less than 5% of it."
            ];
            
            let sampleText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
            let startTime = null;
            let timeLeft = 60;
            let timerInterval = null;
            let correctChars = 0;
            let totalChars = 0;
            
            // Display the sample text
            function displayText() {
                textElement.innerHTML = '';
                
                for (let i = 0; i < sampleText.length; i++) {
                    const span = document.createElement('span');
                    span.textContent = sampleText[i];
                    span.dataset.index = i;
                    textElement.appendChild(span);
                }
            }
            
            // Calculate WPM
            function calculateWPM() {
                if (!startTime) return 0;
                
                const timeElapsed = (Date.now() - startTime) / 1000 / 60; // in minutes
                const wordsTyped = correctChars / 5; // standard word length is 5 characters
                return Math.round(wordsTyped / timeElapsed);
            }
            
            // Calculate accuracy
            function calculateAccuracy() {
                if (totalChars === 0) return 100;
                return Math.round((correctChars / totalChars) * 100);
            }
            
            // Update the display based on user input
            function updateDisplay() {
                const inputValue = inputElement.value;
                const inputLength = inputValue.length;
                
                // Reset all spans
                const spans = textElement.querySelectorAll('span');
                spans.forEach(span => {
                    span.classList.remove('correct', 'incorrect', 'current');
                });
                
                // Mark correct characters
                for (let i = 0; i < Math.min(inputLength, sampleText.length); i++) {
                    if (inputValue[i] === sampleText[i]) {
                        spans[i].classList.add('correct');
                    } else {
                        spans[i].classList.add('incorrect');
                    }
                }
                
                // Mark current position
                if (inputLength < sampleText.length) {
                    spans[inputLength].classList.add('current');
                }
                
                // Update stats
                correctChars = 0;
                totalChars = inputLength;
                
                for (let i = 0; i < inputLength; i++) {
                    if (inputValue[i] === sampleText[i]) {
                        correctChars++;
                    }
                }
                
                wpmElement.textContent = calculateWPM();
                accuracyElement.textContent = calculateAccuracy() + '%';
            }
            
            // Start the timer
            function startTimer() {
                clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    timeLeft--;
                    timeElement.textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        endTest();
                    }
                }, 1000);
            }
            
            // End the test
            function endTest() {
                inputElement.disabled = true;
                
                const wpm = calculateWPM();
                const accuracy = calculateAccuracy();
                
                showAlert('info', 'Test Completed!', `WPM: ${wpm}\nAccuracy: ${accuracy}%`, 'Try Again', 'Close', 
                            () => { startTypingSpeedTest(); }, 
                            () => { closeGame(); });
            }
            
            // Input event listener
            inputElement.addEventListener('input', () => {
                if (!startTime) {
                    startTime = Date.now();
                    startTimer();
                }
                
                updateDisplay();
                
                // Check if user has finished typing
                if (inputElement.value === sampleText) {
                    clearInterval(timerInterval);
                    endTest();
                }
            });
            
            window.startTypingSpeedTest = function() {
                // Reset everything
                sampleText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
                startTime = null;
                timeLeft = 60;
                correctChars = 0;
                totalChars = 0;
                
                wpmElement.textContent = '0';
                accuracyElement.textContent = '100%';
                timeElement.textContent = timeLeft;
                
                inputElement.value = '';
                inputElement.disabled = false;
                inputElement.focus();
                
                displayText();
                startTimer();
            };
        }

        // Close modal when clicking outside
        document.getElementById('gameModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeGame();
            }
        });

        // Close alert modal when clicking outside
        document.getElementById('alertModal').addEventListener('click', function(e) {
            if (e.target === this) {
                const modal = document.getElementById('alertModal');
                modal.classList.remove('active');
            }
        });
    </script>
</body>
</html>